var a,COMPILED=true,goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.evalWorksForGlobals_=null;goog.provide=function(b){if(!COMPILED){if(goog.getObjectByName(b)&&!goog.implicitNamespaces_[b])throw Error('Namespace "'+b+'" already declared.');for(var d=b;d=d.substring(0,d.lastIndexOf("."));)goog.implicitNamespaces_[d]=true}goog.exportPath_(b)};if(!COMPILED)goog.implicitNamespaces_={};
goog.exportPath_=function(b,d,e){b=b.split(".");e=e||goog.global;!(b[0]in e)&&e.execScript&&e.execScript("var "+b[0]);for(var f;b.length&&(f=b.shift());)if(!b.length&&goog.isDef(d))e[f]=d;else e=e[f]?e[f]:(e[f]={})};goog.getObjectByName=function(b,d){b=b.split(".");d=d||goog.global;for(var e;e=b.shift();)if(d[e])d=d[e];else return null;return d};goog.globalize=function(b,d){d=d||goog.global;for(var e in b)d[e]=b[e]};
goog.addDependency=function(b,d,e){if(!COMPILED){var f;b=b.replace(/\\/g,"/");for(var g=goog.dependencies_,j=0;f=d[j];j++){g.nameToPath[f]=b;b in g.pathToNames||(g.pathToNames[b]={});g.pathToNames[b][f]=true}for(f=0;d=e[f];f++){b in g.requires||(g.requires[b]={});g.requires[b][d]=true}}};
goog.require=function(b){if(!COMPILED)if(!goog.getObjectByName(b)){var d=goog.getPathFromDeps_(b);if(d){goog.included_[d]=true;goog.writeScripts_()}else{b="goog.require could not find: "+b;goog.global.console&&goog.global.console.error(b);throw Error(b);}}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(b){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(b){b.getInstance=function(){return b.instance_||(b.instance_=new b)}};
if(!COMPILED){goog.included_={};goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}};goog.inHtmlDocument_=function(){var b=goog.global.document;return typeof b!="undefined"&&"write"in b};goog.findBasePath_=function(){if(goog.inHtmlDocument_()){var b=goog.global.document;if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else{b=b.getElementsByTagName("script");for(var d=b.length-1;d>=0;--d){var e=b[d].src,f=e.length;if(e.substr(f-7)=="base.js"){goog.basePath=
e.substr(0,f-7);return}}}}};goog.writeScriptTag_=function(b){if(goog.inHtmlDocument_()&&!goog.dependencies_.written[b]){goog.dependencies_.written[b]=true;goog.global.document.write('<script type="text/javascript" src="'+b+'"><\/script>')}};goog.writeScripts_=function(){function b(j){if(!(j in f.written)){if(!(j in f.visited)){f.visited[j]=true;if(j in f.requires)for(var h in f.requires[j])if(h in f.nameToPath)b(f.nameToPath[h]);else if(!goog.getObjectByName(h))throw Error("Undefined nameToPath for "+
h);}if(!(j in e)){e[j]=true;d.push(j)}}}var d=[],e={},f=goog.dependencies_;for(var g in goog.included_)f.written[g]||b(g);for(g=0;g<d.length;g++)if(d[g])goog.writeScriptTag_(goog.basePath+d[g]);else throw Error("Undefined script input");};goog.getPathFromDeps_=function(b){return b in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[b]:null};goog.findBasePath_();goog.global.CLOSURE_NO_DEPS||goog.writeScriptTag_(goog.basePath+"deps.js")}
goog.typeOf=function(b){var d=typeof b;if(d=="object")if(b){if(b instanceof Array||!(b instanceof Object)&&Object.prototype.toString.call(b)=="[object Array]"||typeof b.length=="number"&&typeof b.splice!="undefined"&&typeof b.propertyIsEnumerable!="undefined"&&!b.propertyIsEnumerable("splice"))return"array";if(!(b instanceof Object)&&(Object.prototype.toString.call(b)=="[object Function]"||typeof b.call!="undefined"&&typeof b.propertyIsEnumerable!="undefined"&&!b.propertyIsEnumerable("call")))return"function"}else return"null";
else if(d=="function"&&typeof b.call=="undefined")return"object";return d};goog.propertyIsEnumerableCustom_=function(b,d){if(d in b)for(var e in b)if(e==d&&Object.prototype.hasOwnProperty.call(b,d))return true;return false};goog.propertyIsEnumerable_=function(b,d){return b instanceof Object?Object.prototype.propertyIsEnumerable.call(b,d):goog.propertyIsEnumerableCustom_(b,d)};goog.isDef=function(b){return b!==undefined};goog.isNull=function(b){return b===null};
goog.isDefAndNotNull=function(b){return b!=null};goog.isArray=function(b){return goog.typeOf(b)=="array"};goog.isArrayLike=function(b){var d=goog.typeOf(b);return d=="array"||d=="object"&&typeof b.length=="number"};goog.isDateLike=function(b){return goog.isObject(b)&&typeof b.getFullYear=="function"};goog.isString=function(b){return typeof b=="string"};goog.isBoolean=function(b){return typeof b=="boolean"};goog.isNumber=function(b){return typeof b=="number"};
goog.isFunction=function(b){return goog.typeOf(b)=="function"};goog.isObject=function(b){b=goog.typeOf(b);return b=="object"||b=="array"||b=="function"};goog.getUid=function(b){if(b.hasOwnProperty&&b.hasOwnProperty(goog.UID_PROPERTY_))return b[goog.UID_PROPERTY_];b[goog.UID_PROPERTY_]||(b[goog.UID_PROPERTY_]=++goog.uidCounter_);return b[goog.UID_PROPERTY_]};goog.removeUid=function(b){"removeAttribute"in b&&b.removeAttribute(goog.UID_PROPERTY_);try{delete b[goog.UID_PROPERTY_]}catch(d){}};
goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(b){var d=goog.typeOf(b);if(d=="object"||d=="array"){if(b.clone)return b.clone();d=d=="array"?[]:{};for(var e in b)d[e]=goog.cloneObject(b[e]);return d}return b};
goog.bind=function(b,d){var e=d||goog.global;if(arguments.length>2){var f=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(g,f);return b.apply(e,g)}}else return function(){return b.apply(e,arguments)}};goog.partial=function(b){var d=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);e.unshift.apply(e,d);return b.apply(this,e)}};
goog.mixin=function(b,d){for(var e in d)b[e]=d[e]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(b){if(goog.global.execScript)goog.global.execScript(b,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(b);else{var d=goog.global.document,e=d.createElement("script");e.type="text/javascript";e.defer=false;e.appendChild(d.createTextNode(b));
d.body.appendChild(e);d.body.removeChild(e)}}else throw Error("goog.globalEval not available");};goog.typedef=true;goog.getCssName=function(b,d){b=b+(d?"-"+d:"");return goog.cssNameMapping_&&b in goog.cssNameMapping_?goog.cssNameMapping_[b]:b};goog.setCssNameMapping=function(b){goog.cssNameMapping_=b};goog.getMsg=function(b,d){d=d||{};for(var e in d)b=b.replace(new RegExp("\\{\\$"+e+"\\}","gi"),d[e]);return b};goog.exportSymbol=function(b,d,e){goog.exportPath_(b,d,e)};
goog.exportProperty=function(b,d,e){b[d]=e};goog.inherits=function(b,d){function e(){}e.prototype=d.prototype;b.superClass_=d.prototype;b.prototype=new e;b.prototype.constructor=b};
goog.base=function(b,d){var e=arguments.callee.caller;if(e.superClass_)return e.superClass_.constructor.apply(b,Array.prototype.slice.call(arguments,1));for(var f=Array.prototype.slice.call(arguments,2),g=false,j=b.constructor;j;j=j.superClass_&&j.superClass_.constructor)if(j.prototype[d]===e)g=true;else if(g)return j.prototype[d].apply(b,f);if(b[d]===e)return b.constructor.prototype[d].apply(b,f);else throw Error("goog.base called from a method of one name to a method of a different name");};var Banana={};Banana.Util={};Banana.Util.NameSpace={};var namespace=function(b,d,e){b=b.split(d||".");e=e||window;var f;d=0;for(f=b.length;d<f;d++)e=e[b[d]]=e[b[d]]||{};return e};Banana.Util.Base={};
(function(){var b=false,d=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(e){function f(){!b&&this.init&&this.init.apply(this,arguments)}var g=this.prototype;b=true;var j=new this;b=false;for(var h in e)j[h]=typeof e[h]=="function"&&typeof g[h]=="function"&&d.test(e[h])?function(n,k){return function(){var o=this._super;this._super=g[n];var p=k.apply(this,arguments);this._super=o;return p}}(h,e[h]):e[h];f.prototype=j;f.prototype.constructor=f;f.extend=arguments.callee;
return f}})();Banana.Control={};namespace("Banana").Control=Class.extend({init:function(){this.generateUniqueId();this.customId=false;this.binds=[];this.controls=[];this.debug=false},createComponents:function(){},updateDisplay:function(){},onPreInvalidateContents:function(){},unload:function(){},onWindowResize:function(){}});a=Banana.Control.prototype;a.applyToChildren=function(b){var d=this.applyToChildren.arguments;d.shift();var e;e=0;for(len=this.controls.length;e<len;e++)b.apply(this,d)};
a.setId=function(b){this.id=b;this.customId=true;return this};a.getId=function(){return this.id};a.setClientId=function(b){this.clientId=b};a.getClientId=function(){return this.clientId};a.generateUniqueId=function(){this.id=Banana.Util.generateUniqueId()};a.render=function(b){this.getPage().initRender(b,this,null,null,false)};a.setPage=function(b){this.page=b};a.getPage=function(){return this.page};a.getProxy=function(b){return jQuery.proxy(b,this)};a.setParent=function(b){this.parent=b};
a.getParent=function(){return this.parent};a.getEnabled=function(){};a.addControl=function(b){this.controls.push(b);return this};a.getControls=function(){return this.controls};a.findControl=function(b){if(b===this.getId())return this;else{var d=this.getControls();if(!d)return null;var e,f;e=0;for(f=d.length;e<f;e++)if(d[e]instanceof Banana.Control){var g=d[e].findControl(b);if(g)return g}}return null};a.remove=function(){this.getPage()instanceof Banana.UiControl&&this.getPage().removeControl(this)};
a.clear=function(){this.getPage()instanceof Banana.UiControl&&this.getPage().clearControl(this);this.controls=[]};a.invalidateDisplay=function(){var b=this.getPage();b&&b.isRendered&&b.rerender(this.getFirstUiControl())};a.triggerEvent=function(b,d){jQuery(this).trigger(b,d)};
a.getDomEventTypes=function(){return["mousedown","mousemove","resize","mouseup","ready","click","dblclick","error","ready","select","submit","focusin","focusout","focus","change","mouseover","mouseleave","mouseenter","mouseout","keypress","keyup","keydown"]};
a.bind=function(b,d,e){if(!this.binds)this.binds=[];if(this.hasBind(b,d))return false;if(this.getDomEventTypes().indexOf(b)!==-1){this.binds.push({name:b,func:d,data:e,type:Banana.Controls.EventTypes.DOM_EVENT});this.debugEvent(Banana.Controls.EventTypes.DOM_EVENT,b,"Bind normal");this.isRendered&&jQuery("#"+this.getClientId()).bind(b,e,d)}else{this.debugEvent(Banana.Controls.EventTypes.CUSTOM_EVENT,b,"Bind directly");this.binds.push({name:b,func:d,data:e,type:Banana.Controls.EventTypes.CUSTOM_EVENT});
jQuery(this).bind(b,e,d)}return this};a.hasBind=function(b,d){if(!this.binds)this.binds=[];var e,f;e=0;for(f=this.binds.length;e<f;e++){var g=this.binds[e];if(d){if(g.name===b&&(d.guid===g.func.guid||g.func===d))return true}else if(g.name===b)return true}return false};
a.unbind=function(b,d){var e,f;e=0;for(f=this.binds.length;e<f;e++){var g=this.binds[e];this.debugEvent(3,b,"Unbind");if(d){if(g.name===b&&(d.guid===g.func.guid||g.func===d)){this.getDomEventTypes().indexOf(b)!==-1?jQuery("#"+this.getClientId()).unbind(b,d):jQuery(this).unbind(b,d);jQuery(this).unbind(b,d);this.binds.splice(e,1)}}else{this.getDomEventTypes().indexOf(b)!==-1?jQuery("#"+this.getClientId()).unbind(b):jQuery(this).unbind(b);this.binds.splice(e,1)}}};
a.registerEvents=function(){if(this.binds){var b,d;b=0;for(d=this.binds.length;b<d;b++){var e=this.binds[b].name,f=this.binds[b].func,g=this.binds[b].data,j=this.binds[b].type;if(j===Banana.Controls.EventTypes.CUSTOM_EVENT&&this.getPage().isRerendering){this.debugEvent(j,e,"Register event");g?jQuery(this).bind(e,g,f):jQuery(this).bind(e,f)}else this.debugEvent(j,e,"Ignore register event")}}};a.unregisterEvents=function(){if(this.binds){this.debugEvent(3,"","Unregister all events CONTROL");jQuery(this).unbind()}};
a.getHtml=function(b){var d=[],e=this.getControls(),f,g;f=0;for(g=e.length;f<g;f++)if(e[f]instanceof Banana.Control)d.push(e[f].getHtml(b));else typeof e[f]==="string"&&d.push(e[f]);return d.join("")};a.debugEvent=function(b,d,e){if(this.debug)if(this.id==="debugme")if(b===Banana.Controls.EventTypes.DOM_EVENT)console.log(e,"dom",d,this.id);else if(b===Banana.Controls.EventTypes.CUSTOM_EVENT)console.log(e,"customevent",d,this.id);else b===3&&console.log(e,"all events",d,this.id)};
a.getFirstUiControl=function(){if(this instanceof Banana.UiControl&&!this.markAsNonRender)return this;else if(this.parent)return this.parent.getFirstUiControl();return null};Banana.Util.ArrayUniCollection=function(){function b(d,e){delete e.data[d]}this.data={};this.indexKey=[];this.addItem=function(d,e){this.data[d]=e;this.indexKey[this.indexKey.length]=d};this.alterItem=function(d,e){if(this.data[d])this.data[d]=e};this.getItem=function(d){return this.data[d]};this.getArray=function(){var d=[];this.each(function(e,f){d.push(f)});return d};this.getItems=function(){return this.data};this.getItemByIndex=function(d){return this.getItem(this.indexKey[d])};this.getKeyByIndex=
function(d){return this.indexKey[d]};this.getLength=function(){return this.indexKey.length};this.removeByIndex=function(d){b(this.indexKey[d],this);this.indexKey.splice(d,1)};this.isset=function(d){return this.data[d]!=undefined};this.clone=function(){c=new MFArrayUniCollection;c.data=eval(uneval(this.data));c.indexKey=this.indexKey.slice();return c};this.sortedKeys=function(d){d=d||function(f,g){return parseInt(f)>parseInt(g)};var e=this.indexKey.slice();e.sort(d);return e};this.each=function(d,
e){for(var f=this.getLength(),g=0;g<f;g++)d(g,this.getItemByIndex(g),e)};this.remove=function(){}};Banana.Util.ArrayBiCollection=function(){this.keyIndex=new Banana.Util.ArrayUniCollection;this.keyData=new Banana.Util.ArrayUniCollection;this.clone=function(){var b=new Banana.Util.ArrayBiCollection;b.keyIndex=this.keyIndex.clone();b.keyData=this.keyData.clone();return b};this.getArray=function(){var b=[];this.each(function(d,e){b.push(e)});return b};this.addItem=function(b,d){this.remove(b);this.keyIndex.addItem(b,this.keyIndex.getLength());this.keyData.addItem(b,d)};this.getItem=function(b){return this.keyData.getItem(b)};
this.getItemByIndex=function(b){return this.keyData.getItemByIndex(b)};this.getKeyByIndex=function(b){return this.keyIndex.getKeyByIndex(b)};this.getItemByKey=function(b){return this.getItemByIndex(this.getIndex(b))};this.getIndex=function(b){return this.keyIndex.getItem(b)};this.getLength=function(){return this.keyIndex.getLength()};this.isset=function(b){return this.getItem(b)!=undefined};this.remove=function(b){if(this.isset(b)){var d=this.keyIndex.getItem(b);this.keyIndex.removeByIndex(d);this.keyData.removeByIndex(d);
b=this.getLength();for(d=d;d<b;d++)this.keyIndex.alterItem(this.getKeyByIndex(d),d)}};this.clear=function(){this.keyIndex=new Banana.Util.ArrayUniCollection;this.keyData=new Banana.Util.ArrayUniCollection};this.sort=function(b){b=this.keyIndex.sortedKeys(b);var d=this.keyData;this.clear();for(var e=0;e<b.length;e++)this.addItem(b[e],d.getItem(b[e]));return this};this.each=function(b,d){for(var e=this.getLength(),f=0;f<e;f++)b(f,this.getItemByIndex(f),d)}};Banana.thirdParty={};Banana.thirdParty.OWLClone={};
owl=function(){function b(){}function d(k){if(typeof k=="object"){b.prototype=k;return new b}else return k}function e(k){if(typeof k!=="object")return k;else if(k===null)return null;else{var o=k.valueOf();if(k!=o)return new k.constructor(o);else{if(k instanceof k.constructor&&k.constructor!==Object){o=d(k.constructor.prototype);for(var p in k)if(k.hasOwnProperty(p))o[p]=k[p]}else{o={};for(p in k)o[p]=k[p]}return o}}}function f(k){for(var o in k)this[o]=k[o]}function g(){this.copiedObjects=[];thisPass=
this;this.recursiveDeepCopy=function(k){return thisPass.deepCopy(k)};this.depth=0}function j(k,o){var p=new g;if(o)p.maxDepth=o;return p.deepCopy(k)}function h(k){if(window.Node)return k instanceof Node;else{if(k===document)return true;return typeof k.nodeType==="number"&&k.attributes&&k.childNodes&&k.cloneNode}}var n=[];f.prototype={constructor:f,canCopy:function(){return false},create:function(){},populate:function(){}};g.prototype={constructor:g,maxDepth:256,cacheResult:function(k,o){this.copiedObjects.push([k,
o])},getCachedResult:function(k){for(var o=this.copiedObjects,p=o.length,r=0;r<p;r++)if(o[r][0]===k)return o[r][1]},deepCopy:function(k){if(k===null)return null;if(typeof k!=="object")return k;var o=this.getCachedResult(k);if(o)return o;for(o=0;o<n.length;o++){var p=n[o];if(p.canCopy(k))return this.applyDeepCopier(p,k)}throw new Error("no DeepCopier is able to copy "+k);},applyDeepCopier:function(k,o){var p=k.create(o);if(o instanceof Banana.Data.BaseObject){var r=Banana.Data.ObjectMapper.getObject(o.getClass()),
t;for(t in p)r[t]=p[t];p=r}this.cacheResult(o,p);this.depth++;if(this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");k.populate(this.recursiveDeepCopy,o,p);this.depth--;return p}};j.DeepCopier=f;j.deepCopiers=n;j.register=function(k){k instanceof f||(k=new f(k));n.unshift(k)};j.register({canCopy:function(){return true},create:function(k){return k instanceof k.constructor?d(k.constructor.prototype):{}},populate:function(k,o,p){for(var r in o)if(o.hasOwnProperty(r))p[r]=
k(o[r]);return p}});j.register({canCopy:function(k){return k instanceof Array},create:function(k){return new k.constructor},populate:function(k,o,p){for(var r=0;r<o.length;r++)p.push(k(o[r]));return p}});j.register({canCopy:function(k){return k instanceof Date},create:function(k){return new Date(k)}});j.register({canCopy:function(k){return h(k)},create:function(k){if(k===document)return document;return k.cloneNode(false)},populate:function(k,o,p){if(o===document)return document;if(o.childNodes&&o.childNodes.length)for(var r=
0;r<o.childNodes.length;r++){var t=k(o.childNodes[r]);p.appendChild(t)}}});return{DeepCopyAlgorithm:g,copy:e,clone:d,deepCopy:j}}();Banana.Util.Utils={};Banana.Util.serialize=function(b){return JSON._stringify(b)};Banana.Util.unserialize=function(b){return JSON.parse(b)};Banana.Util.NamespaceToFunction=function(b){b=b.split(".");for(var d=window,e=0,f=b.length;e<f;e++){d=d[b[e]];if(!d)return null}return d};Banana.Util.getDataByPath=function(b,d){d=d.split(".");b=b;for(var e=0,f=d.length;e<f;e++){b=b[d[e]];if(b==undefined)return null}return b};Banana.Util.Clone=function(b,d){if(d)return owl.deepCopy(b);return owl.clone(b)};
Banana.Util.FindByField=function(b,d,e){for(var f=0,g=b.length;f<g;f++)if(b[f][d]==e)return b[f];return null};Banana.Util.CombineArrayByField=function(b,d){if(b instanceof Array){if(!d){log.error("Banana.Util.CombineArrayByField - No field given");return b}}else{log.error("Banana.Util.CombineArrayByField - List should be of type Array");return b}for(var e={},f=0;f<b.length;f++){e[b[f][d]]||(e[b[f][d]]=[]);e[b[f][d]].push(b[f])}b=[];for(var g in e)b.push(e[g]);return b};
Banana.Util.CopyTo=function(b,d,e,f){if(b instanceof Array&&d instanceof Array)for(var g=d.splice(0,d.length),j=0,h=b.length;j<h;j++){f=b[j];if(typeof f=="object"){var n=f[e];if(n){for(var k=false,o=0,p=g.length;o<p;o++){var r=g[o],t=r[e];if(t&&t==n){k=true;d.push(r);Banana.Util.CopyTo(f,r,e,{ref:d,prop:j});break}}k||d.push(f)}else d.push(f)}else d[j]=f}else if(b instanceof Array)if(f)f.ref[f.prop]=b;else throw"Unable to assign property to object (missing reference)";else if(typeof b=="object"){g=
[];for(j in d)typeof d[j]!="function"&&g.push(j);for(j in b){f=b[j];if(typeof f!="function"){h=g.indexOf(j);h>=0&&g.splice(h,1);if(typeof b[j]=="object"&&d[j])Banana.Util.CopyTo(b[j],d[j],e,{ref:d,prop:j});else d[j]=f}}for(j=0;j<g.length;j++)delete d[g[j]]}return d};Banana.Util.ObjectsAreEqual=function(b,d,e){return Banana.Util.ObjectPropsSameTo(b,d,e)&&Banana.Util.ObjectPropsSameTo(d,b,e)};
Banana.Util.ObjectPropsSameTo=function(b,d,e){if(!d||!b)return false;e||(e=[]);for(var f in b)if(typeof b[f]!="function")if(typeof b[f]=="object"&&d[f]!==null)if(typeof d[f]=="object"){if(!Banana.Util.ObjectsAreEqual(b[f],d[f],e))return false}else return false;else if(typeof b[f]=="string"||typeof b[f]=="number"||typeof b[f]=="boolean")if(e.indexOf(f)==-1&&d[f]!=b[f])return false;return true};
Banana.Util.sortObjectKeys=function(b,d){var e=[];for(var f in b)e.push(f);d?e.sort(d):e.sort();d={};for(var g=0;g<e.length;g++){f=e[g];d[f]=b[f]}return d};Banana.Util.generateUniqueId=function(){return((1+Math.random())*68719476736|0).toString(16).substring(1)};Banana.Util.flattenTreeDepthFirst=function(b,d,e){e||(e=[]);if(!b)return e;if(b[d]){var f,g;f=0;for(g=b[d].length;f<g;f++)Banana.Util.flattenTreeDepthFirst(b[d][f],d,e)}e.push(b);return e};
Banana.Util.arrayInteratorAsync=function(b,d,e,f,g){function j(p){setTimeout(function(){p()},e)}function h(){k++;if(o>k){for(var p=0;p<=n;p++){k++;if(k>o)return f();d(b[k],k)}g&&g();j(h)}else if(f)return f()}if(typeof d!="function")return log.error("No callback specified for async iterator");e=e||0;var n=b.length>10?b.length/10:1,k=-1,o=b.length;h()};Banana.Util.ValidationManager=function(){function b(e){i=0;for(len=d.length;i<len;i++)if(d[i].id==e.id)return true;return false}var d=[];return{addValidator:function(e){b(e)||d.push(e)},hasValidator:function(e){if(d.indexOf(e)==-1)return false;return true},removeValidator:function(e){e=d.indexOf(e);d.splice(e,i)},removeValidators:function(){d=[]},validate:function(e){return e.isValid()},validateAll:function(){var e=true;i=0;for(len=d.length;i<len;i++)if(d[i]&&d[i].id)d[i].isValid()||(e=false);return e}}}();Banana.Util.UrlManager=function(){var b={},d={},e={},f=null,g=null,j=false;getUrlObject=function(){var h=getBrowserUrl(),n={},k,o;h=h.split("&");for(var p=h.length-1;p>=0;p--){o=h[p].split("=");k=o[0];n[k]=o.slice(1).join("=")}return n};setBrowserUrl=function(h){if(navigator.appName=="Microsoft Internet Explorer"&&document.getElementById("URLFrame")){document.frames.URLFrame.location.replace(document.frames.URLFrame.location.pathname+"?"+location.hash.slice(1));document.getElementById("URLFrame").setAttribute("src",
document.frames.URLFrame.location.pathname+"?"+h)}location.hash=h};getBrowserUrl=function(){if(navigator.appName=="Microsoft Internet Explorer"&&document.getElementById("URLFrame")){location.hash=document.frames.URLFrame.location.search.slice(1);return document.frames.URLFrame.location.search.slice(1)}else return location.hash.slice(1)};updateBrowserUrl=function(){var h="";e=Banana.Util.sortObjectKeys(e);for(var n in e)if(e[n].bhmValue){h+=h.length===0?"":"&";h=h+n+"="+e[n].bhmValue}h!=getBrowserUrl()&&
setBrowserUrl(h)};startChecking=function(){stopHandler=false;j||startHandler()};startHandler=function(){j=true;if(stopHandler){clearTimeout(g);stopHandler=false}else{f||(f=function(){var h=getUrlObject(),n;for(var k in e){n=h[k]||"";if(e[k]&&h[k])if(e[k].bhmValue!=n){e[k].bhmValue=n;jQuery(document).trigger("url."+k,[n,k])}}startHandler()});g=setTimeout(f,20)}};stopChecking=function(){stopHandler=true;clearTimeout(g);g=null;j=false};return{registerModule:function(h){e[h]||(e[h]={});e[h].bhmValue=
getUrlObject()[h]?getUrlObject()[h]:""},autoRegisterModules:function(){params=getUrlObject();for(param in params)param&&this.registerModule(param)},stopChecking:function(){stopChecking()},startChecking:function(){startChecking()},removeModules:function(){for(var h in e){stopChecking();this.unlistenModule(h)}e={}},clearUrl:function(){this.removeModules();this.removeListeners()},removeModule:function(h,n){stopChecking();if(n)e[h].bhmValue="";else{this.unlistenModule(h);delete e[h]}updateBrowserUrl();
for(var k in e)return startChecking()},setModule:function(h,n,k){if(h){k=k||false;if(!e[h])return false;stopChecking();e[h].bhmValue=n;if(!k)if(e[h]&&this.getModule[h]!=n){updateBrowserUrl();jQuery(document).trigger("url."+h,[n,h])}startChecking()}},updateUrl:function(){updateBrowserUrl()},getModule:function(h){if(e[h]&&e[h].bhmValue)return e[h].bhmValue;else if(getUrlObject()[h])return getUrlObject()[h];return null},saveModuleHistory:function(){d[this.getModule("section")]=getUrlObject()},getModuleHistory:function(h){return d[h]},
getBrowserUrl:function(){return getBrowserUrl()},getHistory:function(){return d},listenModule:function(h,n,k){k||(k={});stopChecking(h);jQuery(document).bind("url."+h,k,n);b[h]=true;startChecking(h)},unlistenModule:function(h){jQuery(document).unbind("url."+h);delete b[h]},removeListeners:function(){for(l in b)typeof b[l]!="function"&&this.unlistenModule(l);b=[]},getURLObject:function(){return getUrlObject()},createUrlString:function(h,n){if(n){n.section=h;n=Banana.Util.sortObjectKeys(n);h="";for(var k in n)h+=
"&"+k+"="+n[k];return h.substr(1,h.length)}else return"section="+h}}}();Banana.Util.StateManager=function(){function b(e,f,g,j,h,n){e=e+"="+escape(f)+(g?"; expires="+g.toGMTString():"")+(j?"; path="+j:"")+(h?"; domain="+h:"")+(n?"; secure":"");document.cookie=e}function d(e){return(e=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)"))?unescape(e[2]):null}return{setState:function(e,f){b(e,f)},getState:function(e){e=d(e);if(e=="false")return false;else if(e=="true")return true;return e},removeState:function(e){b(e,"")}}}();Banana.Util.DomHelper={};
namespace("Banana.Util").DomHelper={render:function(b,d){typeof d==="string"?jQuery("#"+d).append(b):jQuery("#"+d.getClientId()).append(b)},replace:function(b,d){typeof d==="string"?jQuery(d).replaceWith(b):jQuery("#"+d.getClientId()).replaceWith(b)},renderHtml:function(b,d,e){if(d.getClientId()==="body")e?jQuery("body").html(b):jQuery("body").append(b);else e?jQuery("#"+d.getClientId()).html(b):jQuery("#"+d.getClientId()).append(b)},clear:function(b){jQuery("#"+b.getClientId()).empty()},remove:function(b){typeof b===
"string"?jQuery("#"+b).remove():jQuery("#"+b.getClientId()).remove()},setData:function(b,d){jQuery("#"+d.getClientId()).val(b)},setTextData:function(b,d){jQuery("#"+d.getClientId()).text(b)},setCheckBoxData:function(b,d){b?jQuery("#"+d.getClientId()).prop({checked:true}):jQuery("#"+d.getClientId()).prop("checked",false)},getData:function(b){return jQuery("#"+b.getClientId()).val()},getCheckBoxData:function(b){return jQuery("#"+b.getClientId()).prop("checked")},clearIdsFrom:function(b){jQuery("#"+
b+" *").attr({id:"cleared"});jQuery("#"+b).attr({id:"cleared"})}};Banana.Util.DateTimecode=function(b,d){var e=new Date;this.getTimecode=function(){return e.getTime()};this.setTimecode=function(j){e.setTime(j);return this};var f=function(j){return(j<10?"0":"")+j};this.getLocalDateTime=function(j){j=j||"%d-%m-%Y %H:%M:%S:%F";var h={H:f(e.getHours()),M:f(e.getMinutes()),S:f(e.getSeconds()),F:f(Math.round(e.getMilliseconds()/1E3*25)),d:f(e.getDate()),m:f(e.getMonth()+1),Y:e.getFullYear(),w:e.getWeek()};for(item in h)j=j.replace("%"+item,h[item]);return j};this.getLocalTime=
function(j){j=j||"%H:%M:%S:%F";return this.getLocalDateTime(j)};this.getLocalDate=function(j){j=j||"%d-%m-%Y";return this.getLocalDateTime(j)};this.getDateTime=function(j){j=j||"%d-%m-%Y %H:%M:%S:%F";var h={H:f(e.getUTCHours()),M:f(e.getUTCMinutes()),S:f(e.getUTCSeconds()),F:f(Math.round(e.getUTCMilliseconds()/1E3*25)),d:f(e.getUTCDate()),m:f(e.getUTCMonth()+1),Y:e.getUTCFullYear()};for(item in h)j=j.replace("%"+item,h[item]);return j};this.getTime=function(j){j=j||"%H:%M:%S:%F";return this.getDateTime(j)};
this.getDate=function(j){j=j||"%d-%m-%Y";return this.getDateTime(j)};var g=function(j){j=j.split(/[-: ]/);if(j.length==3){j.push("0");j.push("0");j.push("0");j.push("0")}if(j.length==4){j.unshift("1970");j.unshift("1");j.unshift("1")}return j};this.setYear=function(j){e.setFullYear(j);return this};this.setUTCYear=function(j){e.setUTCFullYear(j);return this};this.getYear=function(){return e.getFullYear()};this.getUTCYear=function(){return e.getUTCFullYear()};this.setTime=function(j){j=g(j);e.setUTCDate(1);
e.setUTCFullYear(j[2]);e.setUTCMonth(j[1]-1);e.setUTCDate(j[0]);e.setUTCHours(j[3]);e.setUTCMinutes(j[4]);e.setUTCSeconds(j[5]);e.setUTCMilliseconds(j[6]/25*1E3);return this};this.setLocalDate=this.setLocalDateTime=this.setLocalTime=function(j){j=g(j);e.setDate(1);e.setFullYear(j[2]);e.setMonth(j[1]-1);e.setDate(j[0]);e.setHours(j[3]);e.setMinutes(j[4]);e.setSeconds(j[5]);e.setMilliseconds(j[6]/25*1E3);return this};this.add=function(j){this.setTimecode(this.getTimecode()+j.getTimecode());return this};
this.sub=function(j){this.setTimecode(this.getTimecode()-j.getTimecode());return this};this.compareTo=function(j){return this.getTimecode()-j.getTimecode()};this.getWeek=function(){return e.getWeek()};this.getDay=function(){return e.getDay()};this.getMonth=function(){return e.getUTCMonth()+1};this.getLocalMonth=function(){return e.getMonth()+1};this.getMonthDay=function(){return e.getUTCDate()};this.getLocalMonthDay=function(){return e.getDate()};this.addMonth=function(j,h){var n=this.getMonth()+
1,k=this.getYear();h||(h=j?this.getLocalMonthDay():this.getMonthDay());if(n==13){n=1;k++}j?this.setLocalTime(h+"-"+n+"-"+k+" "+this.getLocalTime()):this.setTime(h+"-"+n+"-"+k+" "+this.getTime())};(function(j){if(b){if(isNaN(b))d?j.setLocalTime(b):j.setTime(b);else j.setTimecode(b);return j}})(this)};
Date.prototype.getWeek=function(b){b=typeof b=="int"?b:0;var d=new Date(this.getFullYear(),0,1),e=d.getDay()-b;e=e>=0?e:e+7;d=Math.floor((this.getTime()-d.getTime()-(this.getTimezoneOffset()-d.getTimezoneOffset())*6E4)/864E5)+1;if(e<4){e=Math.floor((d+e-1)/7)+1;if(e>52){nYear=new Date(this.getFullYear()+1,0,1);nday=nYear.getDay()-b;nday=nday>=0?nday:nday+7;e=nday<4?1:53}}else e=Math.floor((d+e-1)/7);return e};Banana.Util.Color=function(b,d,e){var f;this.getR=function(){return this.r};this.setR=function(h){this.r=h;this.computeHSV()};this.getG=function(){return this.g};this.setG=function(h){this.g=h;this.computeHSV()};this.getB=function(){return this.b};this.setB=function(h){this.b=h;this.computeHSV()};this.getH=function(){return this.h};this.setH=function(h){this.h=h;this.computeRGB()};this.getS=function(){return this.s};this.setS=function(h){this.s=h;this.computeRGB()};this.getV=function(){return this.v};
this.setV=function(h){this.v=h;this.computeRGB()};var g=function(h){return(h<16?"0":"")+h.toString(16)},j=function(h){return parseInt(h,16)};this.setValue=function(h){if(h.substr(0,1)==="#"){this.r=j(h.substr(1,2));this.g=j(h.substr(3,2));this.b=j(h.substr(5,2))}else{h=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(h);this.r=parseInt(h[1]);this.g=parseInt(h[2]);this.b=parseInt(h[3])}this.computeHSV()};this.getValue=function(){return"#"+g(this.r)+g(this.g)+g(this.b)};this.computeHSV=function(){var h=
this.r/255,n=this.g/255,k=this.b/255,o=Math.min(h,n,k),p=Math.max(h,n,k);o=p-o;var r=0,t=0;if(p!=0){t=o/p;r=o?h==p?(n-k)/o:n==p?2+(k-h)/o:4+(h-n)/o:0;r*=60;if(r<0)r+=360}else{t=0;r=-1}this.h=r;this.s=t;this.v=p};this.computeRGB=function(){var h=this.h,n=this.s,k=this.v,o=0,p=0,r=0,t=0;o=r=p=0;if(n==0)f=o=r=k;else{h%=360;h/=60;o=Math.floor(h);p=h-o;r=k*(1-n);t=k*(1-n*p);p=k*(1-n*(1-p));switch(o){case 0:f=k;o=p;r=r;break;case 1:f=t;o=k;r=r;break;case 2:f=r;o=k;r=p;break;case 3:f=r;o=t;r=k;break;case 4:f=
p;o=r;r=k;break;default:f=k;o=r;r=t;break}}this.r=Math.round(f*255);this.g=Math.round(o*255);this.b=Math.round(r*255)};(function(h){if(typeof b=="string")h.setValue(b);else{if(typeof b=="number"){h.r=b;h.g=d;h.b=e}else{h.r=0;h.g=0;h.b=0}h.computeHSV()}})(this)};/*
   xxx
*/
namespace("Banana.Util");Banana.Util.Logger=function(){this.id="Base"};Banana.Util.Logger.prototype.write=function(){throw Error("Logger::write should be overloaded!");};/*
   xxx
*/
namespace("Banana.Util.Logger");Banana.Util.Logger.Console=function(){this.id="Console";if(!window.console)window.console={log:function(){},error:function(){},time:function(){},timeEnd:function(){}}};Banana.Util.Logger.Console.prototype=new Banana.Util.Logger;Banana.Util.Logger.Console.prototype.write=function(b){console.log(b)};namespace("Banana.Util");Banana.Util.LogManager=function(){this.loggers=[];this.errorData=[];this.levels={};this.levels.debug=false;this.levels.notice=false;this.levels.warning=false;this.levels.error=false;this.levels.route=false;this.showTime=true};a=Banana.Util.LogManager.prototype;a.addLogger=function(b){if(typeof b=="string")b=eval("new Banana.Util.Logger."+b);this.loggers.push(b)};
a.getInfo=function(){var b="";if(this.loggers.length){b+="Banana is using loggers:\r\n";for(var d=0;d<this.loggers.length;d++)b+=this.loggers[d].id+"\r\n"}else b+="No loggers are defined\r\n";b+="\r\nLogger is showing messages:\r\n";for(var e in this.levels)if(this.levels[e])b+=e+"\r\n";alert(b)};a.setLevel=function(b,d){this.levels[b]=d};a.showTimes=function(b){this.showTime=b};a.addErrorData=function(b,d){if(!d)d=window.location.href;var e={};e.page=d;e.data=b;this.errorData.push(e)};
a.getErrorData=function(){return this.errorData};a.resetErrorData=function(){this.errorData=[]};a.write=function(b,d){if(d)b="["+d+"]\t"+b;if(this.showTime){var e=new Date;d=e.getHours();var f=e.getMinutes(),g=e.getSeconds();e=e.getMilliseconds();b=d+":"+f+":"+g+":"+e+" | "+b}for(d=0;d<this.loggers.length;d++)this.loggers[d].write(b)};a.debug=function(b){this.levels.debug&&this.write(b,"DEBUG")};a.notice=function(b){this.levels.notice&&this.write(b,"NOTICE")};
a.warning=function(b){this.levels.warning&&this.write(b,"WARNING")};a.error=function(b){this.levels.error&&this.write(b,"ERROR")};a.route=function(b){this.levels.route&&this.write(b,"ROUTE")};Banana.Data={};Banana.Data.DataSet={};
namespace("Banana.Data").DataSet=Banana.Control.extend({init:function(){this.dataKey="id";this.controlRegisterModified=this.isChanged=false},setDataKey:function(b){this.dataKey=b},clear:function(){this.unregisterEvents();this.oldData=this.data=this.registeredDataControls=this.registeredDataSourceControls=undefined},bind:function(b,d){if(b=="controlDataChanged")this.enableControlChangeEvent=true;return this._super(b,d)},clearControlData:function(){for(id in this.registeredDataSourceControls){var b=this.registeredDataSourceControls[id];
b.bindedDataSource&&b.bindedDataSource[1]&&b.setDataSource(null,true)}for(id in this.registeredDataControls){b=this.registeredDataControls[id];b.bindedData&&b.bindedData[1]&&b.setData(null,true)}this.oldData=undefined;jQuery(this).trigger("dataChanged",this.data)},setData:function(b,d){this.allowControlUpdate=true;if(this.data!=b&&this.data&&!this.controlRegisterModified)if(d||!Banana.Util.ObjectsAreEqual(b,this.data)){Banana.Util.CopyTo(b,this.data,this.dataKey);this.triggerEvent("dataChanged")}else{this.allowControlUpdate=
false;this.triggerEvent("dataUnchanged")}else{this.data=b;this.triggerEvent("dataChanged")}return this},resetControls:function(){if(this.getData()){this.allowControlUpdate=true;this.clientUpdate()}},getData:function(){return this.data},getIsChanged:function(){return this.isChanged},clientUpdate:function(){if(!this.allowControlUpdate)return false;for(id in this.registeredDataSourceControls){var b=this.registeredDataSourceControls[id];b.bindedDataSource&&this.setControlDataSource(b)}for(id in this.registeredDataControls){b=
this.registeredDataControls[id];b.bindedData&&b.bindedData[1]&&this.setControlData(b)}this.isChanged=this.controlRegisterModified=false},getControlData:function(b){var d={};for(var e in this.registeredDataControls){var f=this.registeredDataControls[e],g=f.getData();if(f instanceof Banana.Controls.DataControl){if(b)j=g===undefined?null:g;else{var j={};j.originalData=null;j.isDataChanged=true;if(this.getData()){j.originalData=this.getDataByPath(f.bindedData[1])||null;j.isDataChanged=this.getDataByPath(f.bindedData[1])!=
g}j.data=g===undefined?null:g}this.ensureObjectFromPath(d,f.bindedData[1],j)}}return d},getChangedDataSet:function(){var b=this.getData();b||(b={});for(var d in this.registeredDataControls){var e=this.registeredDataControls[d];if(e instanceof Banana.Controls.DataControl){var f=e.bindedData[1];f.split(".");this.setDataByPath(e.getData(),f)}}return b},commitControlData:function(){var b={};for(var d in this.registeredDataControls){var e=this.registeredDataControls[d];if(e instanceof Banana.Controls.DataControl)b=
this.ensureObjectFromPath(b,e.bindedData[1],e.getData())}this.setData(b);return this},ensureObjectFromPath:function(b,d,e,f,g){if(d){var j=d.split(".");g=b;b[j[0]]||(b[j[0]]={});var h=j[0];j.splice(0,1);f=d;d=j.join(".");this.ensureObjectFromPath(b[h],d,e,f,g);return b}else g[f]=e},setControlData:function(b){var d=this.getData()===null?null:this.getDataByPath(b.bindedData[1]);b.setData(d);b.triggerEvent("controlDataBinded",d)},setControlDataSource:function(b){if(b.bindedDataSource[1]){var d=this.getDataByPath(b.bindedDataSource[1]);
b.setDataSource(d)}else b.setDataSource(this.getData());b.triggerEvent("controlDataSourceBinded")},getDataByPath:function(b){b=b.split(".");var d=this.getData();if(!d)return d;for(var e=0,f=b.length;e<f;e++){d=d[b[e]];if(d==undefined)return null}return d},setDataByPath:function(b,d){d=d.split(".");var e=this.getData(),f=null;if(d.length==1)f=d;else{e=this.getData();f=0;for(var g=d.length;f<g-1;f++)e=e[d[f]];f=d[d.length-1]}e[f]=b;return e},bindControlToDataSource:function(b){this.controlRegisterModified=
true;if(!this.registeredDataSourceControls)this.registeredDataSourceControls={};if(!this.registeredDataSourceControls[b.getId()]){this.getData()&&this.setControlDataSource(b);this.registeredDataSourceControls[b.getId()]=b}},bindControlToData:function(b){this.controlRegisterModified=true;if(!this.registeredDataControls)this.registeredDataControls={};if(!this.registeredDataControls[b.getId()]){this.getData()&&this.setControlData(b);this.enableControlChangeEvent&&b.bind("dataChanged",this.getProxy(this.controlChangedHandler));
this.registeredDataControls[b.getId()]=b}},controlChangedHandler:function(b){if(!this.controlChecks)this.controlChecks={};var d=b.currentTarget;d=(d=this.getData()===null?"":this.getDataByPath(d.bindedData[1]))||"";this.controlChecks[b.currentTarget.id]=d!=b.currentTarget.data?false:true;for(index in this.controlChecks)if(this.controlChecks[index]==false){this.triggerEvent("controlDataChanged");return}this.triggerEvent("controlDataRestored")},unBindControl:function(b){this.controlRegisterModified=
true;delete this.registeredDataControls[b.getId()]},unBindDataSourceControl:function(b){if(this.registeredDataSourceControls){this.controlRegisterModified=true;delete this.registeredDataSourceControls[b.getId()]}}});Banana.UiControl={};namespace("Banana").UiControl=Banana.Control.extend({init:function(){this._super();this.css={};this.style="";this.isRendered=false;this.enabled=this.visible=true},addControl:function(b,d){if(this.isInitialized)if(d){this.getPage().initializeControl(b,this,false,this.controls.length+1);this.render(b)}else this.getPage().initializeControl(b,this,false,this.controls.length+1);return this._super(b)}});a=Banana.UiControl.prototype;a.getDomWriter=function(){return jQuery("#"+this.getClientId())};
a.getTagName=function(){return""};a.getDemensions=function(){return this.getDimensions()};a.getDimensions=function(){var b={};b.height=jQuery("#"+this.getClientId()).height();b.width=jQuery("#"+this.getClientId()).width();b.offset=jQuery("#"+this.getClientId()).offset();return b};a.setClientId=function(b){this.clientId=b};a.getClientId=function(){return this.clientId};
a.triggerEvent=function(b,d){if(this.getDomEventTypes().indexOf(b)!==-1)this.isRendered&&jQuery("#"+this.clientId).trigger(b,d);else jQuery(this).trigger(b,d)};a.setState=function(b,d){var e=Banana.Util.UrlManager.getModule("section"),f=this.getClientId();if(this.customId)f=this.getId();Banana.Util.StateManager.setState(e+"-"+f+"-"+b,d);return this};
a.getState=function(b){var d=Banana.Util.UrlManager.getModule("section"),e=this.getClientId();if(this.customId)e=this.getId();return Banana.Util.StateManager.getState(d+"-"+e+"-"+b)};a.removeState=function(b){var d=Banana.Util.UrlManager.getModule("section"),e=this.getClientId();if(this.customId)e=this.getId();return Banana.Util.StateManager.removeState(d+"-"+e+"-"+b)};
a.getAttributes=function(){var b={};if(this.attributes)b=this.attributes;b.id=this.getClientId();b.style=this.getStyle();if(this.getCss()){var d=[];for(prop in this.getCss()){cssPart=prop+":"+this.getCss()[prop]+";";d.push(cssPart)}b.style+=d.join("")}if(this.getCssClass().length>0)b["class"]=this.getCssClass().join(" ");return b};
a.setAttribute=function(b,d){if(this.isRendered)switch(b){case "async":case "autofocus":case "checked":case "location":case "multiple":case "readOnly":case "selected":case "autoplay":case "controls":case "defer":case "disabled":case "hidden":case "loop":case "open":case "scoped":jQuery("#"+this.getClientId()).prop(b,d);break;default:jQuery("#"+this.getClientId()).attr(b,d)}var e=this.getAttributes();e[b]=d;this.attributes=e;return this};
a.removeAttribute=function(b){if(this.isRendered)switch(b){case "async":case "autofocus":case "checked":case "location":case "multiple":case "readOnly":case "selected":case "autoplay":case "controls":case "defer":case "disabled":case "hidden":case "loop":case "open":case "scoped":jQuery("#"+this.getClientId()).removeProp(b);break;default:jQuery("#"+this.getClientId()).attr(b,"")}this.attributes&&this.attributes[b]&&delete this.attributes[b];return this};
a.getAttribute=function(b){if(!this.attributes)return null;return this.attributes[b]};a.setStyle=function(b){this.style=b;return this};a.getStyle=function(){return this.style};a.addCss=function(b){var d={};for(prop in this.getCss())d[prop]=this.getCss()[prop];for(prop in b)d[prop]=b[prop];this.css=d};a.setCss=function(b){this.addCss(b);this.isRendered&&jQuery("#"+this.getClientId()).css(this.css);return this};a.getCss=function(){return this.css};
a.getStyleProperty=function(b){return this.css[b]||jQuery("#"+this.getClientId()).css(b)};a.getCssClass=function(){if(!this.cssClass)this.cssClass=[];return this.cssClass};a.addCssClass=function(b){if(!this.cssClass)this.cssClass=[];if(!this.hasCssClass(b)){this.cssClass.push(b);this.isRendered&&jQuery("#"+this.getClientId()).addClass(b)}return this};
a.removeCssClass=function(b){if(!this.cssClass)return this;var d=this.cssClass.indexOf(b);if(d!=-1){this.cssClass.splice(d,1);this.isRendered&&jQuery("#"+this.getClientId()).removeClass(b)}return this};a.switchCssClass=function(b,d){this.removeCssClass(b);this.addCssClass(d);return this};a.hasCssClass=function(b){if(this.isRendered)return jQuery("#"+this.getClientId()).hasClass(b);if(jQuery.inArray(b,this.getCssClass())>=0)return true;return false};
a.getHtmlAttributes=function(){var b=this.getAttributes(),d=[],e;for(e in b)b[e]&&b[e]!="undefined"&&d.push(e+'="'+b[e]+'" ');return d=d.join("")};
a.setVisible=function(b,d,e,f){this.triggerEvent("onSetVisible",b);this.visible=b;var g=false;if(b){if(this.isRendered)if(e==="fadeIn"){this.getDomWriter().fadeIn(d,this.getProxy(function(){this.setCss({display:""});f&&f()}));g=true}else this.getDomWriter().show(d,this.getProxy(function(){this.setCss({display:""});f&&f()}));g||this.setCss({display:""})}else{if(this.isRendered)if(e==="fadeOut"){g=true;this.getDomWriter().fadeOut(d,this.getProxy(function(){this.setCss({display:"none"});f&&f()}))}else this.getDomWriter().hide(d,
this.getProxy(function(){this.setCss({display:"none"});f&&f()}));g||this.setCss({display:"none"})}return this};a.getVisible=function(){return this.isRendered?jQuery("#"+this.getClientId()).is(":visible"):this.visible};
a.registerEvents=function(){if(this.binds||this.binds.length){var b,d;b=0;for(d=this.binds.length;b<d;b++){var e=this.binds[b].name,f=this.binds[b].func,g=this.binds[b].data,j=this.binds[b].type;if(j===Banana.Controls.EventTypes.DOM_EVENT){this.debugEvent(j,e,"Register event");g?jQuery("#"+this.getClientId()).bind(e,g,f):jQuery("#"+this.getClientId()).bind(e,f)}else if(j===Banana.Controls.EventTypes.CUSTOM_EVENT&&this.getPage().isRerendering)g?jQuery(this).bind(e,g,f):jQuery(this).bind(e,f)}}};
a.unregisterEvents=function(){if(this.binds&&this.binds.length){this.debugEvent(3,name,"Unregister all event");jQuery("#"+this.getClientId()).unbind();jQuery(this).unbind()}};
a.setEnabled=function(b,d){this.triggerEvent("onSetEnabled",b);if(b){this.enabled=true;if(this.isRendered){jQuery("#"+this.getClientId()+" div").removeClass("disabledDivs");jQuery("#"+this.getClientId()+" :input").removeClass("disabledInputs");jQuery("#"+this.getClientId()+" :input").removeProp("disabled");jQuery("#"+this.getClientId()).removeProp("disabled")}this.removeAttribute("disabled");this.removeCssClass("disabledDivs")}else{this.enabled=false;if(this.isRendered){jQuery("#"+this.getClientId()+
" div").addClass("disabledDivs");jQuery("#"+this.getClientId()+" :input").addClass("disabledInputs");jQuery("#"+this.getClientId()+" :input").prop("disabled",true);this.getDomWriter().show()}this.setAttribute("disabled",true);this.addCssClass("disabledDivs")}if(d){var e=this.getControls(),f,g;f=0;for(g=e.length;f<g;f++)e[f].setEnabled&&e[f].setEnabled(b,d)}return this};a.getEnabled=function(){return this.enabled};
a.getHtml=function(b){var d=[];d.push("<"+this.getTagName()+" ");d.push(this.getHtmlAttributes());d.push(">");var e=this.getControls(),f,g;f=0;for(g=e.length;f<g;f++)if(e[f]instanceof Banana.Control)d.push(e[f].getHtml(b));else typeof e[f]==="string"&&d.push(e[f]);this instanceof Banana.UiControl&&d.push("</"+this.getTagName()+">");if(b)this.isRendered=true;return d.join("")};Banana.Controls={};Banana.Controls.Panel={};namespace("Banana.Controls").Panel=Banana.UiControl.extend({init:function(){this._super()}});Banana.Controls.Panel.prototype.getTagName=function(){return"div"};Banana.Loader={};
namespace("Banana.Controls.").Loader=Banana.Control.extend({init:function(){this._super();this.text=(new Banana.Controls.Label).addCssClass("BLoaderTextLabel");this.loader=(new Banana.Controls.Panel).addCssClass("BLoaderContainer").setVisible(false);this.loaderTrans=(new Banana.Controls.Panel).addCssClass("BLoaderTransparantContainer").setVisible(false);this.cover=(new Banana.Controls.Panel).addCssClass("BLoaderCover").setVisible(false)},createComponents:function(){var b=(new Banana.Controls.Image).setImage("banana/images/ajax-loader.gif").setStyle("float:left;");this.addControl(this.loaderTrans);
this.addControl(this.loader);this.loader.addControl(b);this.loader.addControl(this.text);this.addControl(this.cover);this.getFirstUiControl().setCss({position:"relative"})},updateDisplay:function(){var b=this.getFirstUiControl().getDimensions();this.loader.setCss({"margin-left":b.width/2-140+"px"});this.loaderTrans.setCss({"margin-left":b.width/2-140+"px"});this.setVisibleLater&&this.setVisibleControls()},setVisibleControls:function(){if(this.cover){this.cover.setVisible(true);this.loaderTrans.setVisible(true);
this.loader.setVisible(true)}},show:function(b){this.text.setData(b);if(this.isRendered)this.setVisibleControls();else this.setVisibleLater=true;return this},hide:function(){if(this.cover){this.setVisibleLater=false;this.cover.setVisible(false);this.loaderTrans.setVisible(false);this.loader.setVisible(false);return this}}});Banana.Page={};namespace("Banana").Page=Banana.Controls.Panel.extend({init:function(){this.triggerEvent("onInit");this.addCssClass("BPage");this._super();this.uniqueId=0;this.validators=[];this.dataSets=[];if(!this.resizefunc)this.resizefunc=this.getProxy(function(){this.onWindowResize(this)});jQuery(window).bind("resize",this.resizefunc)}});a=Banana.Page.prototype;a.setApplication=function(b){this.application=b};a.getApplication=function(){return this.application};
a.run=function(b){this.validationControls={};this.initRender(this,b||this.getApplication().settings.renderTarget)};
a.initRender=function(b,d,e,f,g){this.rendering=true;if(f){this.renderControl(b,d,e);this.rendering=false;this.recursiveRegisterEvents(b)}else{this.isRendered=false;this.initializeControl(b,d);this.renderControl(b,d,e);this.isRendered=true;this.setVisible(true);b&&b.triggerEvent&&b.triggerEvent("renderComplete",this);if(!g){this.recursiveRegisterEvents(b);this.parentFirstTimeRendering=this.rendering=false}this.recursiveUpdateDisplay(b)}};
a.rerender=function(b){var d=this.isRerendering,e=this.rendering;if(e&&!d)this.parentFirstTimeRendering=true;this.isRerendering=true;e||this.recursiveUnRegisterEvents(b);var f=b.getFirstUiControl(),g=f.getParent();this.initRender(b,g,f,d,e);this.isRerendering=d};a.setContentPlaceHolder=function(b){this.contentPlaceHolder=b};a.getContentPlaceHolder=function(){return this.contentPlaceHolder};a.hideLoader=function(){this.loader&&this.loader.hide()};
a.addDataSet=function(b,d){if(this.dataSets[b])log.warning('Dataset id "'+b+'" already exists');else{d.id=b;this.dataSets[b]=d}};a.getDataSet=function(b){return this.dataSets[b]};a.removeDataSets=function(){var b;for(b in this.dataSets)typeof this.dataSets[b]!=="function"&&this.dataSets[b].clear();this.dataSets=[]};a.isValid=function(){return Banana.Util.ValidationManager.validateAll()};
a.initializeControl=function(b,d){if(b instanceof Banana.Control){if(d instanceof Banana.Control)b.clientId||b.setClientId(d.getClientId()+"-"+this.uniqueId++);else{var e=this.getApplication().settings.applicationName;e?b.setClientId(e+this.uniqueId++):b.setClientId(this.uniqueId++)}b.setParent(d);b.setPage(this);if(!b.isInitialized){b.createComponents();b.isInitialized=true;(d=b.bindedDataSource)&&this.getDataSet(d[0])&&this.getDataSet(d[0]).bindControlToDataSource(b);(d=b.bindedData)&&this.getDataSet(d[0])&&
this.getDataSet(d[0]).bindControlToData(b)}d=b.getControls();var f;e=0;for(f=d.length;e<f;e++)this.initializeControl(d[e],b)}};a.renderControl=function(b,d,e){b=b instanceof Banana.Control?b.getHtml(true):b;e?Banana.Util.DomHelper.replace(b,e):Banana.Util.DomHelper.render(b,d)};a.recursiveUpdateDisplay=function(b){if(b instanceof Banana.Control){b.isRendered=true;b.updateDisplay();b=b.getControls();var d,e;d=0;for(e=b.length;d<e;d++)this.recursiveUpdateDisplay(b[d])}};
a.recursiveRegisterEvents=function(b){if(b instanceof Banana.Control){b.registerEvents();b=b.getControls();var d,e;d=0;for(e=b.length;d<e;d++)this.recursiveRegisterEvents(b[d])}};a.recursiveUnRegisterEvents=function(b){if(b instanceof Banana.Control){b.onPreInvalidateContents();b.unregisterEvents();if(b instanceof Banana.Control){b=b.getControls();var d,e;d=0;for(e=b.length;d<e;d++)this.recursiveUnRegisterEvents(b[d])}}};
a.removeControl=function(b){if(b instanceof Banana.Control){var d=b.controls.slice(),e;for(e=d.length-1;e>=0;e--){this.removeControl(d[e],true);d.pop()}b.unregisterEvents();b.unload();if(d=b.parent){b=d.controls.indexOf(b);d.controls.splice(b,1)}}};a.clearControl=function(b){var d=b.getControls().slice(),e=0,f,g;f=0;for(g=d.length;f<g;f++){e++;this.removeControl(d[f],true)}b.controls=null;jQuery("#"+b.getClientId()).empty()};
a.remove=function(b,d){var e=Banana.Util.flattenTreeDepthFirst(this,"controls");e.pop();Banana.Util.arrayInteratorAsync(e,this.getProxy(function(f){if(f instanceof Banana.Control){f.unregisterEvents();f.unload();var g=f.parent;g&&g.controls&&g.controls.splice(g.controls.indexOf(f),1)}}),0,this.getProxy(function(){this.unload();Banana.Util.ValidationManager.removeValidators();this.clearIds();jQuery(window).unbind();this.unbind();this.removeDataSets();clearTimeout(this.timer);b||Banana.Util.DomHelper.remove(this);
jQuery("#debug").remove();clearTimeout(this.debugTimer);d&&d()}),this.getProxy(function(){}))};a.removeDom=function(){jQuery("#cleared").remove()};a.clearProps=function(){};a.onWindowResize=function(b){if(b instanceof Banana.UiControl){b.onWindowResize();b=b.getControls();var d,e;d=0;for(e=b.length;d<e;d++)this.onWindowResize(b[d])}};a.clearIds=function(b){b||(b=this);Banana.Util.DomHelper.clearIdsFrom(b.getClientId())};Banana.PageTemplate={};namespace("Banana").PageTemplate=Banana.Page.extend({init:function(){this._super();this.content=new Banana.Controls.Panel},createComponents:function(){this.addControl(this.content)},run:function(){this.isRendered?this.triggerEvent("renderComplete",this):this._super();this.pageControl.setApplication(this.getApplication());this.pageControl.run(this.content)},addPageControl:function(b){b.setContentPlaceHolder(this);this.pageControl=b}});Banana.Controls.StatusBar={};
namespace("Banana.Controls").StatusBar=Banana.Controls.Panel.extend({init:function(){this._super();this.addCssClass("BStatusBar");this.defaultTimeout=1E4},updateDisplay:function(){var b=jQuery("#"+this.getClientId()).detach();jQuery("body").append(b)},setSuccesMessage:function(b){var d={};d.type="ok";d.message=b;this.setMessage(d);return this},setErrorMessage:function(b,d,e){var f={};f.type="error";f.message=b;f.timeout=d;f.errors=e;this.setMessage(f);return this},setWarningMessage:function(b,d){var e=
{};e.type="warning";e.message=b;e.timeout=d;this.setMessage(e);return this},setInfoMessage:function(b,d){var e={};e.type="info";e.message=b;e.timeout=d;this.setMessage(e);return this},setMessage:function(b){this.timeout&&clearTimeout(this.timeout);this.setCss({display:"block"});this.clear();this.removeCssClass("BStatusBarError");this.removeCssClass("BStatusBarSuccess");this.removeCssClass("BStatusBarWarning");this.removeCssClass("BStatusBarInfo");this.messageBar=new Banana.Controls.Panel;switch(b.type){case "ok":this.addCssClass("BStatusBarSuccess");
break;case "warning":this.addCssClass("BStatusBarWarning");break;case "error":this.addCssClass("BStatusBarError");break;case "info":this.addCssClass("BStatusBarInfo");break}var d=new Banana.Controls.Label;d.addCssClass("title");d.setData(b.message);this.messageBar.addControl(d);this.addControl(this.messageBar);d=new Banana.Controls.Panel;d.addCssClass("messages");if(b.errors&&b.errors.length)for(var e=0;e<b.errors.length;e++)b.errors[e].message&&d.addControl("<li>"+b.errors[e].message+" </li>");this.messageBar.addControl(d);
this.invalidateDisplay();if(b.timeout!==0&&b.timeout!==undefined)this.timeout=setTimeout(this.getProxy(this.hide),b.timeout||this.defaultTimeout);return this},hide:function(){this.setCss({display:"none"});this.messageBar&&this.messageBar.setVisible(false);return this}});Banana.Controls.DataControls={};Banana.Controls.DataControls.DataControl={};namespace("Banana.Controls").DataControl=Banana.Controls.Panel.extend({init:function(){this._super();this.addCssClass("BDataControl");this.isChanged=false},updateDisplay:function(){this._super();this.setDomData(this.data)}});a=Banana.Controls.DataControl.prototype;a.setData=function(b,d,e){this.data=b;d||this.triggerEvent("dataChanged",b);e||this.setDomData(b);return this};a.getData=function(){return this.data};
a.setDomData=function(b){this.isRendered&&this.data!==undefined&&Banana.Util.DomHelper.setData(b,this)};a.getDomData=function(){if(this.isRendered)return Banana.Util.DomHelper.getData(this)};a.dataSetBind=function(b,d){this.bindedData=[b,d];if(b instanceof Banana.Data.DataSet)b.bindControlToData(this);else this.isRendered&&this.getPage().getDataSet(bd[0])&&this.getPage().getDataSet(bd[0]).bindControlToData(this);return this};
a.unDataSetBind=function(b){this.bindedData=null;if(b instanceof Banana.Data.DataSet)b.bindControlToData(this);else b=this.getPage().getDataSet(b);b.unBindControl(this);return this};Banana.Controls.DataControls.InputControl={};namespace("Banana.Controls").InputControl=Banana.Controls.DataControl.extend({init:function(){this._super();this.bind("change",this.getProxy(this.onChange))}});a=Banana.Controls.InputControl.prototype;a.focus=function(){jQuery("#"+this.clientId).focus();return this};a.onChange=function(){this.setData(this.getDomData(),false,true);this.isChanged=true};a.getTagName=function(){return"input"};a.setValue=function(b){this.value=b;return this};a.getValue=function(){return this.value};
a.setName=function(b){this.name=b;return this};a.getName=function(){return this.name};Banana.Controls.DataControls.TextBox={};namespace("Banana.Controls").TextBox=Banana.Controls.InputControl.extend({init:function(){this.data="";this._super();this.setAttribute("type","text");this.addCssClass("BTextbox");this.bind("keyup",this.getProxy(this.onChange));this.bind("keypress",function(b){return b.keyCode!=13})}});Banana.Controls.DataControls.Password={};namespace("Banana.Controls").Password=Banana.Controls.TextBox.extend({init:function(){this._super();this.setAttribute("type","password")}});Banana.Controls.DataControls.TextArea={};namespace("Banana.Controls").TextArea=Banana.Controls.InputControl.extend({init:function(){this.data="";this._super();this.setAttribute("type","text");this.addCssClass("BTextbox");this.bind("keyup",this.getProxy(function(){this.setData(Banana.Util.DomHelper.getData(this),false,true)}))}});Banana.Controls.TextArea.prototype.getTagName=function(){return"textarea"};Banana.Controls.DataControls.CheckBox={};namespace("Banana.Controls").CheckBox=Banana.Controls.InputControl.extend({init:function(){this._super();this.setAttribute("type","checkbox");this.addCssClass("BCheckbox");this.setData(false);this.bind("change",this.getProxy(this.onChange))},setDomData:function(b){this.isRendered&&Banana.Util.DomHelper.setCheckBoxData(b,this)},getDomData:function(){if(this.isRendered)return Banana.Util.DomHelper.getCheckBoxData(this)}});Banana.Controls.DataControls.Table={};namespace("Banana.Controls").Table=Banana.Controls.DataControl.extend({init:function(){this._super()}});Banana.Controls.Table.prototype.getTagName=function(){return"table"};namespace("Banana.Controls").TableRow=Banana.Controls.DataControl.extend({init:function(){this._super()}});Banana.Controls.TableRow.prototype.getTagName=function(){return"tr"};namespace("Banana.Controls").TableCol=Banana.Controls.DataControl.extend({init:function(){this._super()}});
Banana.Controls.TableCol.prototype.getTagName=function(){return"td"};namespace("Banana.Controls").TableHeaderCol=Banana.Controls.TableCol.extend({init:function(){this._super()}});Banana.Controls.TableHeaderCol.prototype.getTagName=function(){return"th"};Banana.Controls.DataControls.Label={};namespace("Banana.Controls").Label=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BLabel");this.tagName="label"},setData:function(b,d,e){this._super(b,true,e);this.addControl(b);return this},setTagName:function(b){this.tagName=b;return this},getTagName:function(){return this.tagName}});Banana.Controls.Label.prototype.setForControl=function(b){this.setAttribute("for",b.clientId)};
Banana.Controls.Label.prototype.setDomData=function(b){if(this.isRendered){if(b==undefined)b=" - ";Banana.Util.DomHelper.setTextData(b,this)}};Banana.Controls.DataControls.LimitCharLabel={};namespace("Banana.Controls").LimitCharLabel=Banana.Controls.Label.extend({init:function(){this._super()},setCharLimit:function(b){this.charLimit=b;return this},setData:function(b,d,e){if(this.charLimit&&b&&b.length>this.charLimit){this.setAttribute("title",b);b=b.substr(0,this.charLimit)+"..."}return this._super(b,d,e)}});Banana.Controls.DataControls.DatePicker={};
namespace("Banana.Controls").DatePicker=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BDatePicker");this.textBox=(new Banana.Controls.TextBox).addCssClass("BDatePickerTextBox")},createComponents:function(){this.addControl(this.textBox);this.textBox.bind("dataChanged",this.getProxy(function(){this.triggerEvent("dataChanged",this.textBox.getData())}))},setData:function(b,d,e){if(b==null){this.textBox.setData(null);return this}if(b==undefined)return this;if(isNaN(b)){this.textBox.setData(b,
d,e);Banana.Util.DomHelper.setData("",this)}else{var f=new Banana.Util.DateTimecode;f.setTimecode(b);this.textBox.setData(f.getLocalDate("%d-%m-%Y"),d,e)}return this},setMinimumDate:function(b){if(this.isRendered)jQuery("#"+this.textBox.clientId).datepicker("option","minDate",new Date(b.getTimecode()));else this.minDate=b;return this},setReturnType:function(b){this.returnType=b;return this},getData:function(){var b=this.textBox.getData();if(this.returnType=="timecode"){if(b){var d=new Banana.Util.DateTimecode;
d.setLocalDate(b);return d.getTimecode().toString()}}else return b},unload:function(){jQuery("#"+this.textBox.clientId).datepicker("hide");jQuery("#"+this.textBox.clientId).datepicker("destroy")},updateDisplay:function(){this._super();jQuery("#"+this.textBox.getClientId()).datepicker({dateFormat:"dd-mm-yy",minDate:this.minDate?new Date(this.minDate.getTimecode()):new Date(0),beforeShow:function(){setTimeout(function(){jQuery("#ui-datepicker-div").css("z-index","9999999")},200)}})}});Banana.Controls.DataControls.DateTimePicker={};
namespace("Banana.Controls").DateTimePicker=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BDateTimePicker");this.dateCtrl=(new Banana.Controls.DatePicker).addCssClass("BDateTimePickerDateControl");this.timeCtrl=(new Banana.Controls.MaskedTextBox).setMask("99:99:99").addCssClass("BDateTimePickerTimeControl");this.defaultTime="00:00:00:00";this.resultFormat="date"},updateDisplay:function(){!this.timeCtrl.getData()&&this.defaultTime&&this.timeCtrl.setData(this.defaultTime)},
setMinimumDate:function(b){this.dateCtrl.setMinimumDate(b);return this},getTimeControl:function(){return this.timeCtrl},getDateControl:function(){return this.dateCtrl},createComponents:function(){this.addControl(this.dateCtrl);this.addControl(this.timeCtrl);this.dateCtrl.bind("dataChanged",this.getProxy(function(){var b=this.getData();if(b!=this.previousData){this.previousData=b;this.triggerEvent("dataChanged")}}));this.timeCtrl.bind("dataChanged",this.getProxy(function(){var b=this.getData();if(b!=
this.previousData){this.previousData=b;this.triggerEvent("dataChanged")}}))},setData:function(b,d,e){this._super(b);if(b){b=b.split(" ");this.dateCtrl.setData(b[0],d,e);this.timeCtrl.setData(b[1],d,e)}return this},setReturnType:function(b){this.resultFormat=b;return this},getData:function(){var b=this.dateCtrl.getData(),d=this.timeCtrl.getData();if(!b)return false;if(d)if(d.match(/_/))d="00:00:00:00";else d+=":00";else d="00:00:00:00";this.data=[b,d].join(" ");if(this.resultFormat=="tc"){b=new Banana.Util.DateTimecode;
b.setLocalDateTime(this._super());return b.getTimecode()}return this._super()},setDateFormat:function(b){this.resultFormat=b;return this}});Banana.Controls.DataControls.DateSpan={};
namespace("Banana.Controls").DateSpan=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BDateSpan");this.amount=(new Banana.Controls.DropDown).setDataSource({"1":"1","2":"2","3":"3","4":"4","5":"5","6":"6","7":"7","8":"8","9":"9","10":"10"}).setStyle("width:45px;margin-right:4px;").bind("dataChanged",this.getProxy(function(){var b=this.amount.getData()>1?"s":"";this.unit.setDataSource({days:"day"+b,weeks:"week"+b,months:"month"+b})}));this.addControl(this.amount);
this.unit=(new Banana.Controls.DropDown).setStyle("width:80px;");this.addControl(this.unit);this.setData("1 day")},setData:function(b){if(b){b=b.split(" ");this.amount.setData(b[0]);this.unit.setData(b[1]);return this}},getData:function(){return this.amount.getData()+" "+this.unit.getData()}});Banana.Controls.DataControls.Image={};namespace("Banana.Controls").Image=Banana.Controls.DataControl.extend({init:function(){this._super()}});Banana.Controls.Image.prototype.setImage=function(b){this.setAttribute("src",b);return this};Banana.Controls.Image.prototype.setTitle=function(b){this.setAttribute("title",b);return this};Banana.Controls.Image.prototype.getTagName=function(){return"img"};Banana.Controls.Image.prototype.setDomData=function(b){jQuery("#"+this.getClientId()).attr({src:b})};Banana.Controls.DataControls.MaskedTextBox={};namespace("Banana.Controls").MaskedTextBox=Banana.Controls.TextBox.extend({init:function(){this._super();this.mask="99/99/9999"},updateDisplay:function(){this._super();jQuery("#"+this.getClientId()).mask(this.mask)}});Banana.Controls.MaskedTextBox.prototype.setMask=function(b){this.mask=b;return this};
(function(b){var d=(b.browser.msie?"paste":"input")+".mask",e=window.orientation!=undefined;b.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};b.fn.extend({caret:function(f,g){if(this.length!=0)if(typeof f=="number"){g=typeof g=="number"?g:f;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,g)}else if(this.createTextRange){var h=this.createTextRange();h.collapse(true);h.moveEnd("character",g);h.moveStart("character",f);h.select()}})}else{if(this[0].setSelectionRange){f=
this[0].selectionStart;g=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){var j=document.selection.createRange();f=0-j.duplicate().moveStart("character",-100000);g=f+j.text.length}return{begin:f,end:g}}},unmask:function(){return this.trigger("unmask")},mask:function(f,g){if(!f&&this.length>0){var j=b(this[0]),h=j.data("tests");return b.map(j.data("buffer"),function(r,t){return h[t]?r:null}).join("")}g=b.extend({placeholder:"_",completed:null},g);var n=b.mask.definitions;
h=[];var k=f.length,o=null,p=f.length;b.each(f.split(""),function(r,t){if(t=="?"){p--;k=r}else if(n[t]){h.push(new RegExp(n[t]));if(o==null)o=h.length-1}else h.push(null)});return this.each(function(){function r(m){for(;++m<=p&&!h[m];)return m}function t(m){for(;!h[m]&&--m>=0;){for(var q=m;q<p;q++)if(h[q]){w[q]=g.placeholder;var u=r(q);if(u<p&&h[q].test(w[u]))w[q]=w[u];else break}z();s.caret(Math.max(o,m))}}function E(m){m=m;for(var q=g.placeholder;m<p;m++)if(h[m]){var u=r(m),v=w[m];w[m]=q;if(u<p&&
h[u].test(v))q=v;else break}}function F(m){var q=b(this).caret();m=m.keyCode;A=m<16||m>16&&m<32||m>32&&m<41;if(q.begin-q.end!=0&&(!A||m==8||m==46))C(q.begin,q.end);if(m==8||m==46||e&&m==127){t(q.begin+(m==46?0:-1));return false}else if(m==27){s.val(B);s.caret(0,x());return false}}function G(m){if(A){A=false;return m.keyCode==8?false:null}m=m||window.event;var q=m.charCode||m.keyCode||m.which,u=b(this).caret();if(m.ctrlKey||m.altKey||m.metaKey)return true;else if(q>=32&&q<=125||q>186){m=r(u.begin-
1);if(m<p){q=String.fromCharCode(q);if(h[m].test(q)){E(m);w[m]=q;z();q=r(m);b(this).caret(q);g.completed&&q==p&&g.completed.call(s)}}}return false}function C(m,q){for(m=m;m<q&&m<p;m++)if(h[m])w[m]=g.placeholder}function z(){return s.val(w.join("")).val()}function x(m){for(var q=s.val(),u=-1,v=0,y=0;v<p;v++)if(h[v]){for(w[v]=g.placeholder;y++<q.length;){var D=q.charAt(y-1);if(h[v].test(D)){w[v]=D;u=v;break}}if(y>q.length)break}else if(w[v]==q[y]&&v!=k){y++;u=v}if(!m&&u+1<k){s.val("");C(0,p)}else if(m||
u+1>=k){z();m||s.val(s.val().substring(0,u+1))}return k?v:o}var s=b(this),w=b.map(f.split(""),function(m){if(m!="?")return n[m]?g.placeholder:m}),A=false,B=s.val();s.data("buffer",w).data("tests",h);s.attr("readonly")||s.one("unmask",function(){s.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){B=s.val();var m=x();z();setTimeout(function(){m==f.length?s.caret(0,m):s.caret(m)},0)}).bind("blur.mask",function(){x();s.val()!=B&&s.change()}).bind("keydown.mask",F).bind("keypress.mask",
G).bind(d,function(){setTimeout(function(){s.caret(x(true))},0)});x()})}})})(jQuery);Banana.Controls.DataControls.RadioButton={};namespace("Banana.Controls").RadioButton=Banana.Controls.InputControl.extend({init:function(){this._super();this.setAttribute("type","radio");this.addCssClass("BRadioButton")},setName:function(b){this.setAttribute("name",b);return this},setDomData:function(b){this.isRendered&&Banana.Util.DomHelper.setCheckBoxData(b,this);return this},getDomData:function(){if(this.isRendered)return Banana.Util.DomHelper.getCheckBoxData(this)}});Banana.Controls.DataControls.ProgressBar={};
namespace("Banana.Controls").ProgressBar=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BProgressBar");this.data=0;this.bar=new Banana.Controls.Panel;this.bar.addCssClass("BProgressBarBar");this.addControl(this.bar);this.colorBlend=new Banana.Util.Color;this.color1||this.setBeginColor("#88ff88");this.color2||this.setEndColor("#ff8888")},setBeginColor:function(b){this.color1=new Banana.Util.Color(b);return this},setEndColor:function(b){this.color2=new Banana.Util.Color(b);
return this},updateDisplay:function(){var b=this.data/100;this.colorBlend.setH(b*this.color2.getH()+(1-b)*this.color1.getH());this.colorBlend.setS(b*this.color2.getS()+(1-b)*this.color1.getS());this.colorBlend.setV(b*this.color2.getV()+(1-b)*this.color1.getV());this.bar.setCss({width:this.data+"%","background-color":this.colorBlend.getValue()})},setData:function(b,d,e){b=Math.min(100,Math.max(0,Math.round(b)));this._super(b,d,e);this.updateDisplay()}});Banana.Controls.DataControls.Timecode={};namespace("Banana.Controls").Timecode=Banana.Controls.DataControl.extend({init:function(b){this._super();this.ctrl=(new Banana.Controls.MaskedTextBox).setStyle("width:80px;").setMask(b||"99:99:99:99");this.addControl(new Banana.Controls.Decorators.TimecodeFieldValidator(this.ctrl))},setData:function(b){this.ctrl.setData(b);return this},getData:function(){return this.ctrl.getData()},setEnabled:function(b){this.ctrl.setEnabled(b);return this},getEnabled:function(){return this.ctrl.getEnabled()}});Banana.Controls.DataControls.ListControls={};Banana.Controls.DataControls.ListControls.ListControl={};namespace("Banana.Controls").ListControl=Banana.Controls.DataControl.extend({init:function(){this._super();this.dataKeyField="key";this.dataValueField="value";this.dataDepthField="depth"}});a=Banana.Controls.ListControl.prototype;a.setDataSource=function(b,d){this.datasource=b;this.invalidateDisplay();d||this.triggerEvent("dataSourceChanged",b);return this};a.getDataSource=function(){return this.datasource};
a.dataSetSourceBind=function(b,d){this.bindedDataSource=[b,d];b instanceof Banana.Data.DataSet&&b.bindControlToDataSource(this);return this};a.setDataKeyField=function(b){this.dataKeyField=b;return this};a.setDataValueField=function(b){this.dataValueField=b;return this};a.setDataDepthField=function(b){this.dataDepthField=b;return this};Banana.Controls.DataControls.ListControls.CustomListControl={};namespace("Banana.Controls").CustomListControl=Banana.Controls.ListControl.extend({init:function(){this._super()}});Banana.Controls.CustomListControl.prototype.setDomData=function(){};Banana.Controls.CustomListControl.prototype.createControls=function(){};
Banana.Controls.CustomListControl.prototype.setData=function(b,d,e){this.data=typeof b!="string"?b?(newObject=JSON.parse(JSON._stringify(b))):b:b;if(!e){this.clear();this.createControls();this.invalidateDisplay()}return this};Banana.Controls.CustomListControl.prototype.setDataSource=function(b){this.datasource=b;this.clear();this.createControls();this.invalidateDisplay();this.triggerEvent("onSetDataSource");return this};Banana.Controls.DataControls.ListControls.RadioButtonList={};namespace("Banana.Controls").RadioButtonList=Banana.Controls.CustomListControl.extend({init:function(){this._super();this.addCssClass("BRadioButtonList")}});
Banana.Controls.RadioButtonList.prototype.createControls=function(){this.panel=new Banana.Controls.Panel;this.panel.addCssClass("BRadioButtonListItemContainer");for(var b in this.datasource)if(typeof this.datasource[b]!="function"){var d=new Banana.Controls.RadioButton;d.setId(b);d.setValue(b);this.getGroupName()&&d.setName(this.getGroupName());d.bind("change",this.getProxy(function(e){this.onCheckBoxChanged(e.data);this.triggerEvent("dataChanged",this.getData())}),d);this.data&&b==this.data&&d.setData(true);
this.panel.addControl((new Banana.Controls.Decorators.LabelDecoratorRight(d)).setData(this.datasource[b]))}this.addControl(this.panel);this.addControl('<div style="clear:both;"></div>')};Banana.Controls.RadioButtonList.prototype.setGroupName=function(b){this.groupName=b;return this};Banana.Controls.RadioButtonList.prototype.getGroupName=function(){return this.groupName};Banana.Controls.RadioButtonList.prototype.onCheckBoxChanged=function(b){this.data=b.getValue();this.isChanged=true};Banana.Controls.DataControls.ListControls.CheckBoxList={};namespace("Banana.Controls").CheckboxList=Banana.Controls.CustomListControl.extend({init:function(){this._super();this.addCssClass("BCheckBoxList")}});
Banana.Controls.CheckboxList.prototype.createControls=function(){this.panel=new Banana.Controls.Panel;this.panel.addCssClass("BCheckBoxListItemContainer");this.checkboxReferences=[];for(var b in this.datasource)if(typeof this.datasource[b]!="function"){var d=new Banana.Controls.CheckBox;d.setEnabled(this.enabled);this.checkboxReferences.push(d);this.datasource[b][this.dataKeyField]?d.setValue(this.datasource[b][this.dataKeyField]):d.setValue(b);d.setId(b);d.bind("change",this.getProxy(function(){this.isChanged=
true;this.data=this.getData();this.triggerEvent("dataChanged",this.data)}),d);if(this.data)for(var e=0,f=this.data.length;e<f;e++)if(this.datasource[b][this.dataKeyField])if(this.datasource[b][this.dataKeyField]==this.data[e][this.dataKeyField]){d.setData(true);break}else{if(this.datasource[b][this.dataKeyField]==this.data[e]){d.setData(true);break}}else if(b==this.data[e]){d.setData(true);break}d=new Banana.Controls.Decorators.LabelDecoratorRight(d);this.datasource[b][this.dataValueField]?d.setData(this.datasource[b][this.dataValueField]):
d.setData(this.datasource[b]);this.panel.addControl(d)}this.addControl(this.panel);this.addControl('<div style="clear:both;"></div>')};Banana.Controls.CheckboxList.prototype.getData=function(){for(var b=[],d=0,e=this.checkboxReferences.length;d<e;d++)this.checkboxReferences[d].data&&b.push(this.checkboxReferences[d].getValue());return b};/*
  xxx
*/
Banana.Controls.DataControls.ListControls.DropDown={};
namespace("Banana.Controls").DropDown=Banana.Controls.ListControl.extend({init:function(){this._super();this.addCssClass("BDropDown");this.optGroupField="group";this.bind("change",this.getProxy(function(){this.setData(Banana.Util.DomHelper.getData(this)||[]);this.isChanged=true;this.triggerEvent("selectionChanged")}));this.bind("mousedown",function(b){b.stopPropagation()})},updateDisplay:function(){this._super();if(this.getPromptText())if(this.isRendered){var b=jQuery("#"+this.getClientId())[0];if(b&&
b.selectedIndex==-1)b.selectedIndex=0}},getData:function(){return this._super()=="__prompt__"?undefined:this._super()},setData:function(b){if((b===null||b===undefined)&&this.getPromptText())b="__prompt__";return this._super(b)},setDataByIndex:function(b){var d=0;for(var e in this.datasource)if(typeof this.datasource[e]!="function"){if(d==b){this.datasource[e][this.dataKeyField]?this.setData(this.datasource[e][this.dataKeyField]):this.setData(e);break}d++}return this}});a=Banana.Controls.DropDown.prototype;
a.getTagName=function(){return"select"};
a.getHtml=function(){var b=[];b.push("<"+this.getTagName()+" ");b.push(this.getHtmlAttributes());b.push(">");var d=this.datasource;this.getPromptText()&&b.push(this.getOption("__prompt__",this.getPromptText()));var e=null,f=false;for(var g in d)if(typeof d[g]!="function")if(typeof d[g]=="object"){if(d[g]){for(var j=d[g].group,h=d[g][this.dataKeyField],n=d[g][this.dataValueField],k=0;k<d[g][this.dataDepthField];k++)n="&nbsp;&nbsp;&nbsp;&nbsp;"+n;if(j!=e){b.push('<optgroup label="'+j+'">');f=true}b.push(this.getOption(h,
n));if(!f&&j!=e){b.push("</optgroup>");f=false}e=j}}else{n=g;if(d instanceof Array)n=d[g];b.push(this.getOption(n,d[g]))}b.push("</"+this.getTagName()+">");return b.join("")};a.setPromptText=function(b){this.promptText=b;return this};a.getPromptText=function(){return this.promptText};a.setOptGroupField=function(b){this.optGroupField=b;return this};a.getOptGroupField=function(){return this.optGroupField};Banana.Controls.DropDown.useOptGrouping=function(){this.optGrouping=true;return this};
Banana.Controls.DropDown.prototype.getOption=function(b,d){var e="";if(this.data==b||b=="__prompt__"&&this.data==undefined)e="selected=selected";return"<option "+e+' class="BDropDownOption" value="'+b+'">'+d+"</option>"};Banana.Controls.DropDown.prototype.getOptGroup=function(b,d){var e="";if(this.getData()==b)e="selected=selected";return"<option "+e+' class="BDropDownOption" value="'+b+'">'+d+"</option>"};Banana.Controls.DataControls.ListControls.MultiSelect={};
namespace("Banana.Controls").MultiSelect=Banana.Controls.DropDown.extend({init:function(){this._super();this.addCssClass("BDropDown");this.optGroupField="group";this.bind("change",this.getProxy(function(){this.setData(Banana.Util.DomHelper.getData(this)||[]);this.isChanged=true;this.triggerEvent("selectionChanged")}));this.bind("mousedown",function(b){b.stopPropagation()})},getAttributes:function(){var b=this._super();b.multiple="multiple";return b}});Banana.Controls.DataControls.Slider={};
namespace("Banana.Controls").Slider=Banana.Controls.DataControl.extend({init:function(){this._super();this.min=this.stepSize=1;this.max=10;this.orientation="horizontal";this.bind("slide",this.getProxy(function(b,d){this.setData(d.value,false,true)}))},setData:function(b,d,e){this._super(b,d,e);e||this.updateElement()},getDomEventTypes:function(){var b=this._super();b.push("create");b.push("slide");b.push("change");b.push("slidestop");b.push("slidestart");return b},updateElement:function(){if(this.isRendered){var b=
{};b.step=this.stepSize;b.min=this.min;b.max=this.max;if(this.getData())b.value=this.getData();jQuery("#"+this.getClientId()).slider(b)}},updateDisplay:function(){this.updateElement()},setStepSize:function(b){this.stepSize=b},setMin:function(b){this.min=b},setMax:function(b){this.max=b},setOrientation:function(b){this.orientation=b}});Banana.Controls.DataControls.UnorderedList={};namespace("Banana.Controls").UnorderedList=Banana.Controls.DataControl.extend({init:function(){this._super()}});Banana.Controls.UnorderedList.prototype.getTagName=function(){return"ul"};namespace("Banana.Controls").ListItem=Banana.Controls.DataControl.extend({init:function(){this._super()}});Banana.Controls.ListItem.prototype.getTagName=function(){return"li"};Banana.Controls.DataGridBaseListRender={};
namespace("Banana.Controls").DataGridBaseListRender=Banana.Controls.CustomListControl.extend({init:function(){this._super();this.indexKey="id";this.useAutoIndexing=false;this.autoIndexKey="__uid__";this.selectedIndices=new Banana.Util.ArrayBiCollection;this.indexDataMap=[]},createComponents:function(){this.setupIndexing();this._super()},setupIndexing:function(){if(!this.indexKey){this.useAutoIndexing=true;this.indexKey=this.autoIndexKey;return true}return false},getUid:function(){return((1+Math.random())*
68719476736|0).toString(16).substring(1)},applyUid:function(b){if(this.useAutoIndexing&&!b[this.indexKey])b[this.indexKey]=this.getUid()},rerender:function(){this.clear();this.createControls();this.invalidateDisplay()},unload:function(){this.selectedIndices.clear();this.indexDataMap=this.selectedIndices=undefined},setItemIndexKey:function(b){this.indexKey=b;return this},addSelectedIndex:function(b){this.selectIndex(b);this.selectedIndices.addItem(b,true)},clearSelectedIndices:function(){this.selectedIndices.each(this.getProxy(function(b){this.deSelectIndex(this.selectedIndices.getKeyByIndex(b))}));
this.selectedIndices.clear()},clearSelectedIndex:function(b){this.deSelectIndex(b);this.selectedIndices.remove(b)},getSelectedIndices:function(b){if(b){var d=[];this.selectedIndices.each(this.getProxy(function(e){e=this.selectedIndices.getKeyByIndex(e);d.push(e)}));return d}return this.selectedIndices},getIndexIsSelected:function(b){if(this.selectedIndices.getItemByKey(b))return true;return false},setSelectedItems:function(b){i=0;for(len=b.length;i<len;i++){var d=0,e;for(e in this.datasource)if(typeof this.datasource[e]!==
"function"){b[i]&&this.datasource[e][this.indexKey]===b[i][this.indexKey]&&this.addSelectedIndex(d);d++}}},moveSelectedItemsUp:function(){var b=[];this.selectedIndices.each(this.getProxy(function(g){b.push(this.selectedIndices.getKeyByIndex(g))}));if(b.length){b.sort();var d=b.length,e=b[0]-1;if(!(e<0)){var f=this.datasource[e];this.datasource.splice(e,1);this.datasource.splice(e+d,0,f);this.setDataSource(this.datasource);return this}}},moveSelectedItemsDown:function(){var b=[];this.selectedIndices.each(this.getProxy(function(f){b.push(this.selectedIndices.getKeyByIndex(f))}));
if(b.length){b.sort();var d=b[b.length-1]+1;if(!(d+1>this.datasource.length)){var e=this.datasource[d];this.datasource.splice(d,1);this.datasource.splice(b[0],0,e);this.setDataSource(this.datasource);return this}}},selectPreviousFromList:function(){var b=this.listRender.getSelectedIndices(true);this.listRender.clearSelectedIndices();b.length?this.listRender.addSelectedIndex(Math.max(0,b[0]-1)):this.listRender.addSelectedIndex(b.length-1);return this},selectNextFromList:function(){var b=this.listRender.getSelectedIndices(true);
this.listRender.clearSelectedIndices();b.length?this.listRender.addSelectedIndex(Math.min(this.listRender.datasource.length-1,b[0]+1)):this.listRender.addSelectedIndex(0);return this},getSelectedKeys:function(){var b=[];this.selectedIndices.each(this.getProxy(function(d){d=this.selectedIndices.getKeyByIndex(d);b.push(this.indexDataMap[d][this.indexKey])}));return b},removeSelectedItems:function(){var b=this.getSelectedItems();this.clearSelectedIndices();var d,e;d=0;for(e=b.length;d<e;d++){var f=this.indexDataMap.indexOf(b[d]);
this.indexDataMap.splice(f,1);this.removeItem(b[d],f)}},getSelectedItems:function(){var b=[];this.selectedIndices.each(this.getProxy(function(d){d=this.selectedIndices.getKeyByIndex(d);b.push(this.indexDataMap[d])}));return b},addItem:function(b){var d=0;if(this.datasource)d=this.datasource.length;else this.datagrid.setDataSource([]);this.datasource[d]=b;this.indexDataMap[d]=b;this.triggerEvent("dataSourceChanged");return d},removeItem:function(b){var d=null,e,f;e=0;for(f=this.datasource.length;e<
f;e++)if(b[this.indexKey]===this.datasource[e][this.indexKey]){this.selectedIndices.remove(e);d=e}if(d!==null){this.datasource.splice(d,1);this.triggerEvent("dataSourceChanged")}return d},removeAllItems:function(){this.datasource=[];this.selectedIndices.clear()},selectIndex:function(){},deSelectIndex:function(){},createControls:function(){this.setupIndexing();var b,d;b=0;for(d=this.datasource.length;b<d;b++)this.indexDataMap[b]=this.datasource[b]},getObject:function(b){if(typeof b==="function")b=
new b;return b}});Banana.Controls.ItemRender={};namespace("Banana.Controls").DataGridItemRender=Banana.Control.extend({init:function(){this._super();this.listRender=null},setListRender:function(b){this.listRender=b},setRowIndex:function(b){this.rowIndex=b},getRowIndex:function(){return this.listRender.getIndexByRow(this.parent)},getIsSelectable:function(){return false},setData:function(b,d){this.data=b;d||this.triggerEvent("dataChanged",b);return this},getData:function(){return this.data}});Banana.Controls.DataGridTableItemRender={};namespace("Banana.Controls").DataGridTableItemRender=Banana.Controls.DataGridItemRender.extend({init:function(){this._super()}});Banana.Controls.DataGridTableHeaderItemRender={};
namespace("Banana.Controls").DataGridTableHeaderItemRender=Banana.Controls.DataGridTableItemRender.extend({init:function(){this._super()},createComponents:function(){for(var b=this.listRender.columns,d=0,e=b.length;d<e;d++){var f=new Banana.Controls.DataGridHeaderCol;if(b[d].visible!=false){f.sortField=b[d].sortField;f.setStyle("text-align:left;"+b[d].getStyle());if(b[d].sortField){f.setStyle("cursor:pointer;text-align:left;"+b[d].getHeaderStyle());f.bind("click",this.getProxy(function(g){this.listRender.triggerEvent("sort",
g.data)}),b[d].sortField)}f.addControl(b[d].getHeaderText());this.addControl(f)}}}});Banana.Controls.DataGridTableContentItemRender={};
namespace("Banana.Controls").DataGridTableContentItemRender=Banana.Controls.DataGridTableItemRender.extend({init:function(){this._super()},createComponents:function(){this.createColumns(this)},createColumns:function(b){for(var d=this.listRender.columns,e=0,f=d.length;e<f;e++){var g=d[e];if(g.visible!=false){var j=g.getControl();g.getDataField()&&j.setData(Banana.Util.getDataByPath(this.getData(),g.getDataField()));g.listRender=this.listRender;var h=new Banana.Controls.TableCol;h.setStyle(g.getStyle());
h.attributes=g.attributes;h.addControl(j);b.addControl(h);g.triggerEvent("onItemCreated",{control:j,data:this.getData()})}}},getIsSelectable:function(){return true}});Banana.Controls.DataGridTableFooterItemRender={};namespace("Banana.Controls").DataGridTableFooterItemRender=Banana.Controls.DataGridTableItemRender.extend({init:function(){this._super()},createComponents:function(){}});Banana.Controls.DataControls.ListControls.DataGrid={};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls={};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridColumn={};namespace("Banana.Controls").DataGridColumn=Banana.Control.extend({init:function(){this._super();this.attributes={}},getControl:function(){return new Banana.Controls.Label},setCurrentIndexCreation:function(b){this.currentIndexCreation=b}});a=Banana.Controls.DataGridColumn.prototype;
a.setData=function(b){this.data=b;return this};a.getData=function(){return this.data};a.setSortField=function(b){this.sortField=b;return this};a.setHeaderText=function(b){this.headerText=b;return this};a.getHeaderText=function(){return this.headerText};a.setDataField=function(b){this.dataField=b;return this};a.getDataField=function(){return this.dataField};a.setListRender=function(b){this.listRender=b;return this};a.getListRender=function(){return this.listRender};
a.setOwnerRow=function(b){this.ownerRow=b;return this};a.getOwnerRow=function(){return this.ownerRow};a.setHeaderStyle=function(b){this.headerStyle=b;return this};a.getHeaderStyle=function(){return this.headerStyle};a.setStyle=function(b){this.style=b;return this};a.getStyle=function(){return this.style};a.setVisible=function(b){this.visible=b;return this};a.getVisible=function(){return this.visible};a.setAttribute=function(b,d){this.attributes[b]=d;return this};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridControlColumn={};namespace("Banana.Controls").DataGridControlColumn=Banana.Controls.DataGridColumn.extend({init:function(b){this.control=b},getControl:function(){var b=Banana.Util.Clone(this.control);b.generateUniqueId();b.customId=false;b.binds=[];b.controls=[];return b}});Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridCharLimitColumn={};namespace("Banana.Controls").DataGridCharLimitColumn=Banana.Controls.DataGridColumn.extend({init:function(){this._super()},getControl:function(){return(new Banana.Controls.LimitCharLabel).setCharLimit(this.charLimit)}});Banana.Controls.DataGridCharLimitColumn.prototype.setCharLimit=function(b){this.charLimit=b;return this};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridImageButtonColumn={};namespace("Banana.Controls").DataGridImageButtonColumn=Banana.Controls.DataGridColumn.extend({init:function(){this._super()}});
Banana.Controls.DataGridImageButtonColumn.prototype.getControl=function(){var b=new Banana.Controls.Image;b.setCss({cursor:"pointer"});b.setImage(this.imageUrl);b.bind("click",this.getProxy(function(d){function e(g){if(g instanceof Banana.Controls.DataGridTableItemRender)return g;return e(g.getParent())}var f=this.listRender.getIndexByItemRender(e(b));d.stopPropagation();this.listRender.triggerEvent("onCommand",{commandName:this.commandName,index:f})}));return b};
Banana.Controls.DataGridImageButtonColumn.prototype.setImageUrl=function(b){this.imageUrl=b;return this};Banana.Controls.DataGridImageButtonColumn.prototype.setCommandName=function(b){this.commandName=b;return this};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridLinkColumn={};namespace("Banana.Controls").DataGridLinkColumn=Banana.Controls.DataGridColumn.extend({init:function(){this._super()}});Banana.Controls.DataGridLinkColumn.prototype.getControl=function(){return this.link=new Banana.Controls.Link};Banana.Controls.DataGridLinkColumn.prototype.setHref=function(b){this.href=b;this.link&&this.link.setHref(b);return this};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridImageColumn={};namespace("Banana.Controls").DataGridImageColumn=Banana.Controls.DataGridColumn.extend({init:function(){this._super()}});Banana.Controls.DataGridImageColumn.prototype.getControl=function(){this.image=new Banana.Controls.Image;this.imageStyle&&this.image.setStyle(this.imageStyle);return this.image};
Banana.Controls.DataGridImageColumn.prototype.setImageStyle=function(b){this.imageStyle=b;this.image&&this.image.setStyle(b);return this};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridStatusColumn={};namespace("Banana.Controls").DataGridStatusColumn=Banana.Controls.DataGridColumn.extend({init:function(){this._super()}});Banana.Controls.DataGridStatusColumn.prototype.getControl=function(){return this.c=new Banana.Controls.DataControl};
Banana.Controls.DataGridStatusColumn.prototype.setStatus=function(b,d){var e="bluedot.png";switch(b){case 1:e="greendot.png";break;case 0:e="orangedot.png";break;case -1:e="reddot.png";break;case -2:e="blackdot.png";break}b=new Banana.Controls.Image;b.setCss({"float":"left","margin-top":"4px","margin-right":"4px"});b.setImage(Banana.Application.settings.imagedir+"/"+e);e=new Banana.Controls.Label;e.addCssClass("BDataGridStatusColumnText");e.setCss({"float":"left"});e.setData(d||"");this.c.addControl(b);
this.c.addControl(e)};Banana.Controls.DataControls.ListControls.DataGrid.ColumnControls.DataGridHeaderColumn={};
namespace("Banana.Controls").DataGridHeaderCol=Banana.Controls.TableHeaderCol.extend({init:function(){this._super()},createComponents:function(){this._super();this.bind("click",this.getProxy(function(){this.triggerEvent("clicked",this)}));this.bind("mouseover",this.getProxy(function(){jQuery("#"+this.getClientId()).css({"background-color":"#999999"})}));this.bind("mouseout",this.getProxy(function(){jQuery("#"+this.getClientId()).css({"background-color":""})}))}});Banana.Controls.DataGridTableListRender={};
namespace("Banana.Controls").DataGridTableListRender=Banana.Controls.DataGridBaseListRender.extend({init:function(){this._super();this.columns=[];this.indexRowMap=[];this.indexItemRenderFactory=[];this.indexRenderedItemRenderMap=[];this.dataItemRenderMap=new Banana.Util.ArrayBiCollection;this.defaultHeaderItemRender=Banana.Controls.DataGridTableHeaderItemRender;this.defaultContentItemRender=Banana.Controls.DataGridTableContentItemRender;this.defaultFooterItemRender=Banana.Controls.DataGridTableFooterItemRender;
this.headerItemRender=this.contentItemRender=this.headerItemRender=null},addItem:function(b,d){b=this._super(b);if(d)this.indexItemRenderFactory[b]=d;this.createRowByIndex(b,true);this.createItemRenderByIndex(b,true);return b},removeItem:function(b){b=this._super(b);b>=0&&this.removeRowByIndex(b)},removeAllItems:function(){this._super();this.indexRowMap=[];this.indexItemRenderFactory=[];this.table.clear()},getDefaultItemRender:function(){return this.defaultContentItemRender},setHeaderItemRender:function(b){this.headerItemRender=
b},getHeaderItemRender:function(){return this.headerItemRender||this.defaultHeaderItemRender},setItemRenderByIndex:function(b,d,e,f){this.indexItemRenderFactory[b]=d;!f&&this.datasource[b]&&this.datasource[b][this.indexKey]&&this.dataItemRenderMap.addItem(this.datasource[b][this.indexKey],d);if(!e){this.clearRowByIndex(b);this.createItemRenderByIndex(b,true);this.triggerEvent("itemRenderChanged")}},setItemRenderByIndices:function(b,d){if(b.length){for(var e=b.length>4,f=0;f<b.length;f++)this.setItemRenderByIndex(b[f],
d,e);if(e){this.triggerEvent("itemRenderChanged");this.rerender()}}},setItemRender:function(b){this.dataItemRenderMap.clear();for(var d=0,e=this.indexRenderedItemRenderMap.length;d<e;d++)this.setItemRenderByIndex(d,b,true);this.table.clear();this.createTableParts();this.isRendered&&this.table.invalidateDisplay();this.triggerEvent("itemRenderChanged");return this},hasItemRenderAt:function(b,d){if(this.indexRenderedItemRenderMap[b]instanceof d)return true;return false},setFooterItemRender:function(b){this.footerItemRender=
b},getFooterItemRender:function(){return this.footerItemRender},removeRowByIndex:function(b){this.indexRowMap[b].remove();this.selectedIndices.remove(i);this.indexRowMap.splice(b,1);this.indexItemRenderFactory.splice(b,1);this.indexRenderedItemRenderMap.splice(b,1)},clearRowByIndex:function(b){this.indexRowMap[b].clear()},getIndexByRow:function(b){return this.indexRowMap.indexOf(b)},getIndexByItemRender:function(b){return this.indexRowMap.indexOf(b.parent)},getItemRenderByData:function(){},setColumns:function(b){this.columns=
b},createControls:function(){for(var b=0;b<this.columns.length;b++)this.triggerEvent("onInitColumn",this.columns[b]);this.previousSelectedItems=this.getSelectedItems();this.selectedIndices.clear();this._super();this.table=new Banana.Controls.Table;this.table.setAttribute("cellspacing","0");this.table.bind("mousedown",this.getProxy(function(e){if(e.originalEvent.shiftKey||e.originalEvent.ctrlKey)e.preventDefault()}));b=0;for(var d=this.columns.length;b<d;b++)this.columns[b].setListRender(this);this.createTableParts();
this.addControl(this.table);this.setSelectedItems(this.previousSelectedItems)},createTableParts:function(){if(this.datasource.length){this.createHeader();this.createRows();this.createFooter()}},createHeader:function(){var b=new Banana.Controls.TableRow,d=this.getObject(this.getHeaderItemRender());d.setListRender(this);b.addControl(d);this.table.addControl(b)},createRows:function(){for(var b=0,d=this.datasource.length;b<d;b++){this.createRowByIndex(b);this.createItemRenderByIndex(b)}},createFooter:function(){if(this.getFooterItemRender()){var b=
new Banana.Controls.TableRow,d=this.getObject(this.getFooterItemRender());d.setListRender(this);b.addControl(d);this.table.addControl(b)}},createRowByIndex:function(b,d){var e=new Banana.Controls.TableRow;e.addCssClass(b%2?"BDataGridRow":"BDataGridRowAlt");e.bind("mouseover",this.getProxy(function(f){this.onRowMouseOver(f)}),e);e.bind("mouseout",this.getProxy(function(f){this.onRowMouseOut(f)}),e);e.bind("click",this.getProxy(function(f){this.onRowMouseClick(f)}),e);this.table.addControl(e,d);d&&
this.table.invalidateDisplay();this.indexRowMap[b]=e;this.triggerEvent("onRowCreated",{row:e,data:this.datasource[b]})},createItemRenderByIndex:function(b,d){this.currentIndexCreation=b;var e=null;e=this.datasource[b][this.indexKey]&&this.dataItemRenderMap.getItem(this.datasource[b][this.indexKey])?this.dataItemRenderMap.getItem(this.datasource[b][this.indexKey]):this.indexItemRenderFactory[b]?this.indexItemRenderFactory[b]:this.defaultContentItemRender;var f=this.getObject(e);f.setData(this.datasource[b]);
f.bind("dataChanged",this.getProxy(function(g){this.getDataSource()[parseInt(g.data)]=g.currentTarget.getData();this.triggerEvent("dataSourceChanged")}),b.toString());this.dataItemRenderMap.addItem(this.datasource[b][this.indexKey],e);this.indexRenderedItemRenderMap[b]=f;f.setListRender(this);b=this.indexRowMap[b];b.addControl(f);d&&b.invalidateDisplay();this.currentIndexCreation=undefined},onRowMouseOver:function(b){this.indexRenderedItemRenderMap[this.indexRowMap.indexOf(b.data)].getIsSelectable()&&
jQuery(b.currentTarget).addClass("datagridmouseover")},onRowMouseOut:function(b){this.indexRenderedItemRenderMap[this.indexRowMap.indexOf(b.data)].getIsSelectable()&&jQuery(b.currentTarget).removeClass("datagridmouseover")},onRowMouseClick:function(b){var d=this.indexRowMap.indexOf(b.data);if(this.indexRenderedItemRenderMap[d].getIsSelectable())if(!(d<0)){var e=b.ctrlKey;b=b.shiftKey;if(this.getIndexIsSelected(d))!e&&!b?this.clearSelectedIndices():this.clearSelectedIndex(d);else if(this.selectionType==
"single"){this.clearSelectedIndices();this.addSelectedIndex(d)}else{if(!e&&!b){this.clearSelectedIndices();this.addSelectedIndex(d)}e&&this.addSelectedIndex(d);if(b){(e=parseInt(this.selectedIndices.getKeyByIndex(0)))||(e=0);if(d>e){e=e;d=d}else{e=d;d=parseInt(this.selectedIndices.getKeyByIndex([this.selectedIndices.getLength()-1]))}this.clearSelectedIndices();for(e=parseInt(e);e<=parseInt(d);e++)this.addSelectedIndex(e)}}this.triggerEvent("onItemSelect")}},selectIndex:function(b){this.indexRowMap[b].addCssClass("BDataGridRowSelected")},
deSelectIndex:function(b){this.indexRowMap[b].removeCssClass("BDataGridRowSelected")}});Banana.Controls.DataGridTileItemRender={};namespace("Banana.Controls").DataGridTileItemRender=Banana.Controls.DataGridItemRender.extend({init:function(){this._super()}});Banana.Controls.DataGridTileListRender={};
namespace("Banana.Controls").DataGridTileListRender=Banana.Controls.DataGridBaseListRender.extend({init:function(){this._super();this.indexKey=null;this.indexTilePlaceHolderMap=[];this.indexItemRenderFactory=[];this.indexRenderedItemRenderMap=[];this.dataItemRenderMap=new Banana.Util.ArrayBiCollection;this.defaultContentItemRender=Banana.Controls.DataGridTileItemRender;this.contentItemRender=null},addItem:function(b,d){this.applyUid(b);b=this._super(b);if(d)this.indexItemRenderFactory[b]=d;this.clearSelectedIndices();
this.createDivPlaceHolder(this.datasource.length-1,true);this.createItemRenderByIndex(this.datasource.length-1,true);return b},addItems:function(b){var d;d=0;for(len=b.length;d<len;d++)this.addItem(b[d])},addItemAt:function(b,d,e,f){this.applyUid(b);this.clearSelectedIndices();this.datasource.splice(d,0,b);this.indexDataMap.splice(d,0,b);e&&this.indexItemRenderFactory.splice(d,0,b);this.indexTilePlaceHolderMap.splice(d,0,null);this.indexItemRenderFactory.splice(d,0,null);this.indexRenderedItemRenderMap.splice(d,
0,null);if(!f){this.setDataSource(this.datasource);this.triggerEvent("dataSourceChanged")}},addItemsAt:function(b,d,e){var f;f=0;for(len=b.length;f<len;f++)this.addItemAt(b[f],d,e,true);this.setDataSource(this.datasource)},removeItem:function(b){b=this.datasource.indexOf(b);b!=-1&&this.removeRowByIndex(b);this.removeRowByIndex(b)},removeItemByItemRender:function(b){this.removeRowByIndex(this.indexRenderedItemRenderMap.indexOf(b))},removeAllItems:function(){this._super()},getDefaultItemRender:function(){return this.defaultContentItemRender},
setItemRenderByIndex:function(b,d,e,f){this.indexItemRenderFactory[b]=d;!f&&this.datasource[b]&&this.datasource[b][this.indexKey]&&this.dataItemRenderMap.addItem(this.datasource[b][this.indexKey],d);if(!e){this.clearRowByIndex(b);this.createItemRenderByIndex(b,true);this.triggerEvent("itemRenderChanged")}},setItemRenderByIndices:function(b,d){if(b.length){var e=b.length>4,f;for(f=0;f<b.length;f++)this.setItemRenderByIndex(b[f],d,e);if(e){this.triggerEvent("itemRenderChanged");this.rerender()}}},setItemRender:function(b){this.dataItemRenderMap.clear();
var d;d=0;for(clen=this.indexRenderedItemRenderMap.length;d<clen;d++)this.setItemRenderByIndex(d,b,true);if(this.mainContainer){this.mainContainer.clear();this.createItems();this.isRendered&&this.mainContainer.invalidateDisplay()}else this.defaultContentItemRender=b;this.triggerEvent("itemRenderChanged")},getRenderedItemRenderByIndex:function(b){return this.indexRenderedItemRenderMap[b]},rerenderIndex:function(b){this.previousSelectedItems=this.getSelectedItems();this.indexTilePlaceHolderMap[b].clear();
this.createItemRenderByIndex(b,true);this.setSelectedItems(this.previousSelectedItems)},getRenderedItemRenderByData:function(){},hasItemRenderAt:function(b,d){if(this.indexRenderedItemRenderMap[b]instanceof d)return true;return false},removeRowByIndex:function(b){this.datasource.splice(b,1);this.indexTilePlaceHolderMap[b].remove();this.selectedIndices.remove(i);this.indexTilePlaceHolderMap.splice(b,1);this.indexItemRenderFactory.splice(b,1);this.indexRenderedItemRenderMap.splice(b,1);this.triggerEvent("dataSourceChanged")},
clearRowByIndex:function(b){this.indexTilePlaceHolderMap[b].clear()},getIndexByRow:function(b){return this.indexTilePlaceHolderMap.indexOf(b)},getIndexByItemRender:function(b){return this.indexTilePlaceHolderMap.indexOf(b.parent)},createControls:function(){this.setupIndexing();this.previousSelectedItems=this.getSelectedItems();this.selectedIndices.clear();this._super();this.mainContainer=new Banana.Controls.Panel;this.mainContainer.bind("mousedown",this.getProxy(function(b){if(b.originalEvent.shiftKey||
b.originalEvent.ctrlKey)b.preventDefault()}));this.createItemsLater=false;if(this.horizontalItemCount&&this.isRendered)this.createItems();else if(this.horizontalItemCount&&!this.isRendered)this.createItemsLater=true;else this.createItems();this.addControl(this.mainContainer);this.setSelectedItems(this.previousSelectedItems)},updateDisplay:function(){if(this.createItemsLater&&this.getDemensions().width){this.createItemsLater=false;this.createItems();this.mainContainer.invalidateDisplay()}},createItems:function(){if(this.datasource.length){var b;
b=0;for(len=this.datasource.length;b<len;b++){this.applyUid(this.datasource[b]);this.createDivPlaceHolder(b);this.triggerEvent("onPreCreateItemRender",{index:b,data:this.datasource[b]});this.createItemRenderByIndex(b)}this.mainContainer.addControl("<div style='clear:both'></div>");this.cachedDemensions=null}},setHorizontalTileCount:function(b){this.horizontalItemCount=b;return this},setTilePadding:function(b){this.tilePadding=b;return this},createDivPlaceHolder:function(b,d){var e="width:auto;padding:0;float:left;position:relative;";
if(this.horizontalItemCount&&this.horizontalItemCount>1){if(!this.cachedDemensions)this.cachedDemensions=this.getDemensions();e=(this.getDemensions().width-this.horizontalItemCount*this.tilePadding)/this.horizontalItemCount-2;var f=this.tilePadding;if(0===b%this.horizontalItemCount){f/=2;e="width:"+e+"px;float:left;margin-left:"+f+"px;clear:left;"}else e="width:"+e+"px;float:left;margin-left:"+f+"px;"}else e="width:100%;float:left;position:relative;";e=(new Banana.Controls.Panel).setStyle(e);e.addCssClass("BDataGridTilePlaceHolder");
e.bind("mouseenter",this.getProxy(function(g){this.onRowMouseOver(g);return true}),e);e.bind("mouseleave",this.getProxy(function(g){this.onRowMouseOut(g);return true}),e);e.bind("click",this.getProxy(function(g){this.onRowMouseClick(g);return true}),e);this.mainContainer.addControl(e,d);d&&this.mainContainer.invalidateDisplay();this.indexTilePlaceHolderMap[b]=e},createItemRenderByIndex:function(b,d){this.currentIndexCreation=b;var e=null,f=this.datasource[b][this.indexKey];e=f&&this.dataItemRenderMap.getItem(f)?
this.dataItemRenderMap.getItem(f):this.indexItemRenderFactory[b]?this.indexItemRenderFactory[b]:this.defaultContentItemRender;f=this.getObject(e);f.setData(this.datasource[b]);f.bind("dataChanged",this.getProxy(function(g){this.getDataSource()[parseInt(g.data,10)]=g.currentTarget.getData();this.triggerEvent("dataSourceChanged")}),b.toString());this.dataItemRenderMap.addItem(this.datasource[b][this.indexKey],e);this.indexRenderedItemRenderMap[b]=f;f.setListRender(this);b=this.indexTilePlaceHolderMap[b];
b.addControl(f);d&&b.invalidateDisplay();this.currentIndexCreation=undefined},onRowMouseOver:function(b){this.indexRenderedItemRenderMap[this.indexTilePlaceHolderMap.indexOf(b.data)].getIsSelectable()&&jQuery(b.currentTarget).addClass("datagridmouseover")},onRowMouseOut:function(b){this.indexRenderedItemRenderMap[this.indexTilePlaceHolderMap.indexOf(b.data)].getIsSelectable()&&jQuery(b.currentTarget).removeClass("datagridmouseover")},onRowMouseClick:function(b){var d=this.indexTilePlaceHolderMap.indexOf(b.data);
if(this.indexRenderedItemRenderMap[d].getIsSelectable())if(!(d<0)){var e=b.ctrlKey;b=b.shiftKey;if(this.getIndexIsSelected(d))!e&&!b?this.clearSelectedIndices():this.clearSelectedIndex(d);else if(this.selectionType==="single"){this.clearSelectedIndices();this.addSelectedIndex(d)}else{if(!e&&!b){this.clearSelectedIndices();this.addSelectedIndex(d)}e&&this.addSelectedIndex(d);if(b){(e=parseInt(this.selectedIndices.getKeyByIndex(0),10))||(e=0);if(d>e){e=e;d=d}else{e=d;d=parseInt(this.selectedIndices.getKeyByIndex([this.selectedIndices.getLength()-
1]),10)}this.clearSelectedIndices();for(e=parseInt(e,10);e<=parseInt(d,10);e++)this.addSelectedIndex(e)}}this.triggerEvent("onItemSelect")}},selectIndex:function(b){var d=this.getRenderedItemRenderByIndex(b);d&&typeof d.select=="function"&&d.getIsSelectable()&&d.select();this.indexTilePlaceHolderMap[b].addCssClass("BDataGridRowSelected")},deSelectIndex:function(b){var d=this.getRenderedItemRenderByIndex(b);d&&typeof d.deselect=="function"&&d.deselect();this.indexTilePlaceHolderMap[b].removeCssClass("BDataGridRowSelected")}});Banana.Controls.DataGridTreeListHolder={};
namespace("Banana.Controls").DataGridTreeListHolder=Banana.Controls.Panel.extend({init:function(){this._super();this.maximizeAutoWidth=false;this.toggleHolder=(new Banana.Controls.Panel).setStyle("float:left;clear:both;height:20px;width:20px;");this.itemRenderHolder=(new Banana.Controls.Panel).setStyle("float:left;");this.childsHolder=(new Banana.Controls.Panel).setStyle("float:left;clear:both;");this.buttonHolder=(new Banana.Controls.Panel).setStyle("float:left;clear:both;");this.addControl(this.toggleHolder);
this.addControl(this.itemRenderHolder);this.addControl(this.childsHolder);this.addControl(this.buttonHolder)},updateDisplay:function(){if(this.maximizeAutoWidth){var b=this.listRender.getDimensions();if(b.offset){var d=b.offset.left;b=b.width;d=this.itemRenderHolder.getDimensions().offset.left-d;this.itemRenderHolder.setCss({width:b-d-20+"px"})}}},getItemRender:function(){if(!this.itemRenderHolder)return null;return this.itemRenderHolder.controls[0]},getToggle:function(){return this.toggleHolder.controls[0]}});
namespace("Banana.Controls").DataGridTreeListRootHolder=Banana.Controls.Panel.extend({init:function(){this._super();this.childsHolder=(new Banana.Controls.Panel).setStyle("float:left;clear:both;");this.buttonHolder=(new Banana.Controls.Panel).setStyle("float:left;clear:both;");this.addControl(this.itemRenderHolder);this.addControl(this.childsHolder);this.addControl(this.buttonHolder)},getItemRender:function(){return null}});/*
   xxx
*/
Banana.Controls.DataGridTreeListNodeToggle={};
namespace("Banana.Controls").DataGridTreeListNodeToggle=Banana.Controls.Panel.extend({createComponents:function(){this.createImage();this.bind("click",this.getProxy(function(){this.on=this.on?false:true;this.triggerEvent("toggle",this.on);this.createImage()}))},createImage:function(){if(this.on){this.removeCssClass("BTreeListNodeClosed");this.addCssClass("BTreeListNodeOpen")}else{this.removeCssClass("BTreeListNodeOpen");this.addCssClass("BTreeListNodeClosed")}},setOn:function(b){this.on=b;return this}});Banana.Controls.DataGridTreeItemRender={};
namespace("Banana.Controls").DataGridTreeItemRender=Banana.Controls.DataGridItemRender.extend({init:function(){this._super()},createComponents:function(){this.panel=(new Banana.Controls.Panel).setStyle("float:left;");this.panel.addCssClass("BTreeListNodeItemRender");this.label=(new Banana.Controls.Label).setStyle("float:left;");this.panel.addControl(this.label);this.addControl(this.panel)},updateDisplay:function(){this.listRender.getNodeDataByData(this.data);this.data&&this.data.name&&this.label.setData(this.data.name)},
select:function(){this.panel.addCssClass("BTreeListNodeItemRenderSelected")},deselect:function(){this.panel.removeCssClass("BTreeListNodeItemRenderSelected")},getIsSelectable:function(){return true}});Banana.Controls.DataGridTreeListRender={};
namespace("Banana.Controls").DataGridTreeListRender=Banana.Controls.DataGridBaseListRender.extend({init:function(){this._super();this.indexKey=null;this.nodeData=[];this.columns=[];this.indexItemRenderFactory=[];this.dataItemRenderMap=new Banana.Util.ArrayBiCollection;this.keyDataIndex=[];this.dataKeyIndex=[];this.indexHolderMap=[];this.indexOrder=[];this.sortFunc=this.getProxy(function(b,d){return b[this.indexKey].toString().toLowerCase().localeCompare(d[this.indexKey].toString().toLowerCase())});this.childRequestSizeLimit=
20;this.childKey="children";this.rootNodeVisible=true;this.defaultContentItemRender=Banana.Controls.DataGridTreeItemRender},setDefaultItemRender:function(b){this.defaultContentItemRender=b},setIndexItemRender:function(b,d){if(typeof d!=="function")throw"Item render should be a factory";this.indexItemRenderFactory[b]=d;return this},setDefaultOpen:function(b){this.defaultOpen=b;return this},toLogger:function(){this.debug&&console.log(arguments)},setSortfunction:function(b){this.sortFunc=b;return this},
setMaximizeNodeWidth:function(b){this.maximizeNodeWidth=b;return this},setChildProperty:function(b){this.childKey=b;return this},setChildRequestSizeLimit:function(b){this.childRequestSizeLimit=b;return this},hasItemIndexKey:function(b){return this.keyDataIndex[b]?true:false},getDataSourceByKey:function(b){(b=this.keyDataIndex[b])||(b=this.getDataSourceByIndex(0));return b},getNodeDataByData:function(b){return this.nodeData[b[this.indexKey]]},ensureRootData:function(){if(!this.rootData){this.setupIndexing();
var b={};b[this.indexKey]=this.getUid();b[this.childKey]=this.datasource;this.rootData=b;var d={};d.addedChildren=[];d.isRoot=true;d.open=true;this.setNodeDataByData(d,b)}},setNodeData:function(b){this.ensureRootData();this.setNodeDataByData(b,this.rootData)},getNodeData:function(){return this.getNodeDataByData(this.rootData)},setNodeDataByData:function(b,d){if(d){this.applyUid(d);d=d[this.indexKey]}else d="__root__";this.nodeData[d]=b},getRenderedItemRenderByData:function(b){b=this.getNodeDataByData(b);
if(!b)return null;return this.getRenderedItemRenderByIndex(b.index)},getDataSourceByIndex:function(b){b=b.toString();b=b.split("-");var d=null,e=this.datasource,f;for(f=0;f<b.length;f++){d=e[b[f]];e=d[this.indexKey];if(!d||!this.nodeData[e])break;e=d[this.childKey];if(!e)break}return d},getIndexByDataSource:function(b){return this.dataKeyIndex[b[this.indexKey]]},getParentIndex:function(b){b=b.toString().split("-");b.pop();if(b.length)return b.join("-");return null},getHolder:function(b){return this.indexHolderMap[b]},
getParentHolder:function(b){if(b=this.getParentIndex(b))return this.indexHolderMap[b];return null},createControls:function(){try{this.setupIndexing();this.ensureRootData();this.getNodeDataByData(this.nodeData);this.rootData[this.childKey]=this.datasource;this.datasource=[this.rootData];this.toLogger("create Controls",this.datasource);this.toLogger("determined key index as",this.indexKey);this.bind("mousedown",this.getProxy(function(d){if(d.originalEvent.shiftKey||d.originalEvent.ctrlKey)d.preventDefault()}));
this.createNodeInfo(this.datasource,null,this.getProxy(function(d){if(this.defaultOpen)this.nodeData[d[this.indexKey]].open=true}));this.createNodes();this.restoreSelectedIndices();this.addControl('<div style="clear:both"></div>')}catch(b){console.log(b)}},restoreSelectedIndices:function(){var b=0,d,e=this.getSelectedIndices(true);b=0;for(d=e.length;b<d;b++){var f=this.getRenderedItemRenderByIndex(e[b]);f&&f.select()}},createNodeInfo:function(b,d,e){this.sortFunc&&b.sort(this.sortFunc);var f,g;f=
0;for(g=b.length;f<g;f++){var j=b[f];this.applyUid(j);var h=j[this.indexKey];this.toLogger("create nodeinfo for key ",h,this.indexKey);this.nodeData[h]||(this.nodeData[h]=[]);typeof e==="function"&&e(j);if(!this.nodeData[h].addedChildren)this.nodeData[h].addedChildren=[];if(d!==null&&d!==undefined){currentIndex=d+"-"+f;this.nodeData[h].hasParent=true;if(d.toString().split("-").length===1)this.nodeData[h].parentIsRoot=true}else{currentIndex=f;this.nodeData[h].hasParent=false}this.keyDataIndex[j[this.indexKey]]=
j;if(this.tempIndexHolderMap){var n=this.tempIndexHolderMap[this.nodeData[h].index];if(n)this.indexHolderMap[currentIndex]=n}this.indexOrder.push(currentIndex);this.indexDataMap[currentIndex]=j;this.dataKeyIndex[j[this.indexKey]]=currentIndex;this.nodeData[h].index=currentIndex;if(j[this.childKey]&&j[this.childKey].length){this.toLogger(h,"has childs on",this.childKey," default open = ",this.defaultOpen);this.nodeData[h].hasChilds=true;this.nodeData[h].childProperty=this.childKey;if(!this.nodeData[h].hasParent||
this.nodeData[h].open||this.nodeData[h].open==undefined&&this.defaultOpen)this.createNodeInfo(j[this.childKey],currentIndex,e)}else{delete this.nodeData[h].childProperty;this.nodeData[h].hasChilds=false}}},createNodes:function(b){if(!b)b=this.datasource;var d,e;d=0;for(e=b.length;d<e;d++){var f=b[d],g=f[this.indexKey],j=this.nodeData[g];this.toLogger("create node from ",g,f,"with child property ",j);if(typeof f!=="function"){this.createItemRenderByIndex(j.index);j&&typeof f[j.childProperty]==="object"&&
f[j.childProperty].length&&j.open&&this.createNodes(f[j.childProperty],currentIndex);this.determineLoadNextButton(j.index)}}this.toLogger("create node complete")},addItem:function(b){if(!this.datasource||!this.datasource.length){this.setupIndexing();this.toLogger("add item as dummy ",this.indexKey,b,this.datasource);var d={};d[this.childKey]=[b];d.nodeinfo={};d.nodeinfo.childProperty=this.childKey;d.nodeinfo.open=true;d.hide=false;d[this.indexKey]="root";this.datagrid.setDataSource([d])}else{source=
this.datasource[this.datasource.length-1];this.addDataSource(source,b,true)}},removeSelectedItems:function(){this._super();if(!this.datasource||!this.datasource.length||!this.datasource[0][this.childKey]||!this.datasource[0][this.childKey].length)this.datagrid.setDataSource([])},addDataSource:function(b,d,e){try{if(!b&&(!this.datasource||!this.datasource.length)){this.createRootNode();return this.addDataSource(null,d,e)}else if(!b){b=this.datasource[0];this.toLogger("addDatasource no source, pick",
b)}b[this.childKey]||(b[this.childKey]=[]);d instanceof Array||(d=[d]);var f=this.getNodeDataByData(b),g=0,j=b[this.childKey].length-f.addedChildren.length-1,h,n;h=0;for(n=d.length;h<n;h++){var k=d[h];this.toLogger("addDataSource",k,this.indexKey);var o=this.keyDataIndex[k[this.indexKey]];this.toLogger("addDataSource","use index",o);if(o!==undefined){this.toLogger("found existing remove from added, and add childcount");var p=f.addedChildren.indexOf(o);if(p>=0){f.addedChildren.splice(f.addedChildren.indexOf(p,
1));g++;continue}}e||f.addedChildren.push(k);if(this.sortFunc&&b[this.childKey][j]){var r=this.sortFunc(k,b[this.childKey][j]);this.toLogger("sort result of "+k.name+" and "+b[this.childKey][j].name+" ",r);if(r<0){this.toLogger("remove "+k.name+" from addedChildren, we are before the last one");f.addedChildren.splice(f.addedChildren.indexOf(k),1);g++}}b[this.childKey].push(k)}this.toLogger("add ",g);f.childCount+=g;this.prepareSourceToRender(b)}catch(t){console.log(t)}},createRootNode:function(){var b=
{};b[this.childKey]=[];b.nodeinfo=[];b.open=true;if(!this.datasource)this.datasource=[];this.datasource.push(b);this.triggerEvent("dataSourceChanged");this.setDataSource(this.datasource)},prepareSourceToRender:function(b){this.toLogger("PrepareSourceToRender",b);this.indexOrder=[];this.keyDataIndex=[];var d=this.getNodeDataByData(b);this.createNodeInfo(this.datasource,null,this.getProxy(function(e){var f=this.getNodeDataByData(e);this.toLogger("PrepareSourceToRender callback",e);if(this.defaultOpen&&
f.open===undefined)f.open=true}));this.indexHolderMap[d.index].childsHolder.clear();d.index!=0&&this.createToggleControl(d.index);this.createNodes(b[this.childKey],d.index);this.hideLoaderInNode(d.index);this.indexHolderMap[d.index].buttonHolder.clear();this.determineLoadNextButton(d.index);this.indexHolderMap[d.index].invalidateDisplay()},removeChildDataRecursivly:function(b){if(b){var d=this.getNodeDataByData(b);if(!d.removedItems)d.removedItems=[];if(b[this.childKey]&&b[this.childKey].length){var e,
f;e=0;for(f=b[this.childKey].length;e<f;e++){var g=b[this.childKey][e];d.removedItems.push(g);this.removeChildDataRecursivly(g);b[this.childKey]=[]}}b[this.childKey]=[]}},removeNodeByKey:function(b){(b=this.keyDataIndex[b])&&this.removeItem(b)},removeItem:function(b){this._super(b);var d=this.getNodeDataByData(b);this.removeChildDataRecursivly(b);var e=this.getDataSourceByIndex(this.getParentIndex(d.index));if(e&&e[this.childKey]){var f=e[this.childKey].indexOf(b);if(f!==-1){e[this.childKey].splice(f,
1);var g=this.getNodeDataByData(e);b=g.addedChildren.indexOf(b);b>=0&&g.addedChildren.splice(b,1);g.childCount--}}this.indexHolderMap[d.index].remove();this.indexOrder=[];this.keyDataIndex=[];this.tempIndexHolderMap=Banana.Util.Clone(this.indexHolderMap);this.createNodeInfo(this.datasource);this.tempIndexHolderMap=null;if(e&&!e[this.childKey].length){this.removeToggleControl(g.index,true);this.indexHolderMap[g.index].invalidateDisplay()}},showLoaderInNode:function(b){this.showingLoader=true;var d=
(new Banana.Controls.Panel).setStyle("width:16px; height:16px;margin-left:20px;float:left;");d.setId("loader-"+b);d.addCssClass("BTreeListNodeLoader");this.indexHolderMap[b].addControl(d);this.indexHolderMap[b].invalidateDisplay()},hideLoaderInNode:function(b){this.showingLoader=false;(b=this.indexHolderMap[b].findControl("loader-"+b))&&b.remove()},openNode:function(b,d){var e=this.nodeData[d[this.indexKey]];this.createNodeInfo(this.datasource);if(!this.showingLoader){if(e.needsChilds){e={};e.targetIndex=
b;e.datasource=d;e.limit=this.childRequestSizeLimit;e.offset=0;this.triggerEvent("onRequestChilds",e)}else{this.createNodes(d[this.childKey],b);this.determineLoadNextButton(b);this.indexHolderMap[b].invalidateDisplay()}this.indexOrder=[];this.keyDataIndex=[];this.triggerEvent("onItemOpened")}},closeNode:function(b){this.indexHolderMap[b].childsHolder.clear();this.indexHolderMap[b].buttonHolder.clear();this.indexOrder=[];this.keyDataIndex=[];this.createNodeInfo(this.datasource);this.triggerEvent("onItemClosed")},
nodeClicked:function(b,d){if(!this.showingLoader){var e=this.getDataSourceByIndex(b),f=this.nodeData[e[this.indexKey]];f.open=d?true:false;f.open?this.openNode(b,e):this.closeNode(b,e)}},determineLoadNextButton:function(b){var d=this.getDataSourceByIndex(b),e=this.getNodeDataByData(d);this.toLogger("determine load next button ",this.indexKey);if(e){if(d[this.childKey]&&e.open){var f=e.childCount;d=d[this.childKey].length;var g=e.addedChildren.length;this.toLogger("server",f,"client",d,"added",g);
d=d-g;if(d<f){f=f-d;if(f>this.childRequestSizeLimit)f=this.childRequestSizeLimit;e.loadnext=true;return this.createLoadMoreButton(b,f,"")}}e.loadnext=false}},createItemRenderByIndex:function(b){var d=this.getDataSourceByIndex(b),e=this.nodeData[d[this.indexKey]];this.toLogger("create item render by index ",b,d);this.triggerEvent("onPreCreateItem",{index:b,data:d});if(e){this.currentIndexCreation=b;var f=null,g=d[this.indexKey];f=g&&this.dataItemRenderMap.getItem(g)?this.dataItemRenderMap.getItem(g):
this.indexItemRenderFactory[b]?this.indexItemRenderFactory[b]:this.defaultContentItemRender;var j=this.getObject(f);j.setData(d);j.bind("dataChanged",this.getProxy(function(n){this.getDataSource()[parseInt(n.data,10)]=n.currentTarget.getData();this.triggerEvent("dataSourceChanged")}),b.toString());this.dataItemRenderMap.addItem(g,f);j.setListRender(this);if(f=this.getParentHolder(b))var h=new Banana.Controls.DataGridTreeListHolder;else{this.rootHolder=new Banana.Controls.DataGridTreeListRootHolder;
this.addControl(this.rootHolder);h=this.rootHolder}h.listRender=this;h.maximizeAutoWidth=this.maximizeNodeWidth;h.setId(g);this.indexHolderMap[b]=h;if(f=this.getParentHolder(b)){e.parentIsRoot||h.setStyle("margin-left:20px;");f.childsHolder.addControl(h);h.itemRenderHolder.addControl(j);if(e.childProperty||e.needsChilds)this.createToggleControl(b);else f&&this.removeToggleControl(b);this.selectedIndices.getItem(b)&&this.selectIndex(b);this.bindMouseHandler(h,d);this.triggerEvent("onPostCreateIndex",
{index:b,data:d,holder:h})}this.currentIndexCreation=undefined}else this.toLogger("no nodeinfo. dont render")},bindMouseHandler:function(b,d){b.itemRenderHolder.bind("click",this.getProxy(function(e){this.onRowMouseClick(e);this.triggerEvent("onItemMouseClick",e)}),d);b.itemRenderHolder.bind("mouseenter",this.getProxy(function(e){this.triggerEvent("onItemMouseEnter",e)}),d);b.itemRenderHolder.bind("mouseleave",this.getProxy(function(e){this.triggerEvent("onItemMouseOut",e)}),d)},createToggleControl:function(b,
d){var e=this.getDataSourceByIndex(b),f=this.nodeData[e[this.indexKey]],g=this.indexHolderMap[b];g.toggleHolder.clear();var j=(new Banana.Controls.DataGridTreeListNodeToggle).setStyle("float:left;width:20px;height:20px;");j.index=b;j.setOn(f.open);j.bind("toggle",this.getProxy(function(h,n){this.nodeClicked(this.getIndexByDataSource(h.data),n)}),e);g.toggleHolder.addControl(j);d&&g.toggleHolder.invalidateDisplay()},removeToggleControl:function(b,d){var e=this.indexHolderMap[b];b=this.getNodeDataByData(this.getDataSourceByIndex(b));
e.toggleHolder.clear();if(this.rootNodeVisible||b.hasParent){b=(new Banana.Controls.Panel).addCssClass("BTreeListNodeEmpty");e.toggleHolder.addControl(b);d&&e.toggleHolder.invalidateDisplay()}},createLoadMoreButton:function(b,d,e){var f=this.indexHolderMap[b],g=new Banana.Controls.LinkButton;g.setStyle("margin-left:20px;float:left;");var j=this.getNodeDataByData(this.getDataSourceByIndex(b));g.setText("Load next "+d);this.debug&&g.setText("..load next "+d+" debug: "+e);g.bind("click",this.getProxy(function(){if(!this.showingLoader){var h=
this.getDataSourceByIndex(b),n=0,k=h[this.childKey].length-j.addedChildren.length;if(k)n=k;k={};k.targetIndex=b;k.datasource=h;k.limit=d;k.offset=n;this.triggerEvent("onRequestChilds",k)}}));f.buttonHolder.addControl(g);f.buttonHolder.addControl('<div style="clear:both"></div>')},selectIndex:function(b,d){var e=this.getRenderedItemRenderByIndex(b);if(e){e.select();d||this.triggerEvent("onSelectIndex",b)}},deSelectIndex:function(b){var d=this.getRenderedItemRenderByIndex(b);if(d){d.deselect();this.triggerEvent("onDeselectIndex",
b)}},selectAllFromIndex:function(b,d){d||(d=this.getDataSourceByIndex(b));if(d){var e=this.getNodeDataByData(d);if(e){var f,g;f=0;for(g=d[this.childKey].length;f<g;f++){var j=d[this.childKey][f];b=e.index;var h=this.getRenderedItemRenderByIndex(f);if(!(h&&!h.getIsSelectable())){this.selectedIndices.addItem(b,true);this.selectIndex(b,true);j[this.childKey]&&this.selectAllFromIndex(b,j)}}}}},indexBeforeIndex:function(b,d){var e;for(e=0;e<this.indexOrder.length;e++){if(this.indexOrder[e]===b)return true;
if(this.indexOrder[e]===d)return false}return false},getRenderedItemRenderByIndex:function(b){b=this.indexHolderMap[b];if(!b)return null;return b.getItemRender()},onRowMouseClick:function(b){var d=this.getNodeDataByData(b.data).index;if(this.getRenderedItemRenderByIndex(d).getIsSelectable()){var e=b.ctrlKey;b=b.shiftKey;if(this.getIndexIsSelected(d))if(!e&&!b){this.previousShiftFirstItem=null;this.clearSelectedIndices()}else{this.previousShiftFirstItem=null;this.clearSelectedIndex(d)}else if(this.selectionType===
"single"){this.clearSelectedIndices();this.addSelectedIndex(d)}else{if(!e&&!b){this.previousShiftFirstItem=null;this.clearSelectedIndices();this.addSelectedIndex(d)}if(e){this.previousShiftFirstItem=null;this.addSelectedIndex(d)}if(b){if(!this.previousShiftFirstItem)this.previousShiftFirstItem=this.selectedIndices.getKeyByIndex(0);e=this.previousShiftFirstItem;if(this.indexOrder.indexOf(e)===-1)e=this.indexOrder[0];if(!e)return;if(this.indexBeforeIndex(d,e)){b=d;d=e;e=b}b=false;this.clearSelectedIndices();
var f,g;f=0;for(g=this.indexOrder.length;f<g;f++)if(typeof this.indexOrder[f]!=="function"){if(this.indexOrder[f]===e)b=true;if(b){if(this.indexOrder[f]===d)b=false;var j=this.getRenderedItemRenderByIndex(this.indexOrder[f]);j&&!j.getIsSelectable()||this.addSelectedIndex(this.indexOrder[f])}}}}this.triggerEvent("onItemSelect")}}});Banana.Controls.DataGridTreeDataItemRender={};
namespace("Banana.Controls").DataGridTreeDataItemRender=Banana.Controls.DataGridTreeItemRender.extend({init:function(){this._super()},createComponents:function(){this.panel=new Banana.Controls.Panel;this.wrapper=(new Banana.Controls.Panel).setStyle("position:relative;float:left;width:20px;heigth:20px;display:inline-block;");this.clickable=(new Banana.Controls.Panel).setStyle("z-index:12;width:20px; height:20px;position:absolute;top:0;");this.cb=(new Banana.Controls.CheckBox).setStyle("z-index:1;position:absolute;top:0;");this.wrapper.addControl('<div style="clear:both;height:20px;width:20px;"></div>');
this.clickable.bind("click",this.getProxy(function(){if(this.isChecked()){this.setChecked(false);this.triggerEvent("userUnchecked")}else{this.setChecked(true);this.triggerEvent("userChecked")}}));this.wrapper.addControl(this.cb);this.wrapper.addControl(this.clickable);this.label=(new Banana.Controls.Label).setStyle("float:left;");this.panel.addControl(this.wrapper);this.panel.addControl(this.label);this.addControl(this.panel)},updateDisplay:function(){this.data&&this.data.name&&this.label.setData(this.data.name)},
setData:function(b){this._super(b);return this},setChecked:function(b){this.cb.setData(b)},isChecked:function(){return this.cb.getData()},isEnabled:function(){return this.enabled},setEnabled:function(b){if(this.disabled=b){this.cb.setEnabled(true);jQuery("#"+this.cb.clientId).attr("disabled",false)}else{this.cb.setEnabled(false);jQuery("#"+this.cb.clientId).attr("disabled","disabled")}},isSelectable:function(){return false}});Banana.Controls.DataGridDataTreeListRender={};
namespace("Banana.Controls").DataGridDataTreeListRender=Banana.Controls.DataGridTreeListRender.extend({init:function(){this._super();this.data=[];this.defaultContentItemRender=Banana.Controls.DataGridTreeDataItemRender;this.bind("onPostCreateIndex",this.getProxy(function(b,d){this.bindClickHandler(d.holder,d.data)}))},onRowMouseClick:function(){},bindClickHandler:function(b){b=b.getItemRender();b.bind("userChecked",this.getProxy(function(d){this.alterData(d.currentTarget.data[this.indexKey]);var e=
this.getNodeDataByData(d.currentTarget.data);e.checked=true;d.currentTarget.getData();this.toggleCheckStateFrom(e.index,null,true);this.determineCheckboxState()}));b.bind("userUnchecked",this.getProxy(function(d){this.alterData(d.currentTarget.data[this.indexKey]);var e=this.getNodeDataByData(d.currentTarget.data);e.checked=false;d.currentTarget.getData();this.toggleCheckStateFrom(e.index,null,false);this.determineCheckboxState()}))},alterData:function(b,d){if(!this.data)this.data=[];var e=this.data.indexOf(b);
if(d){if(e>-1)return;this.data.push(b)}else{if(e<0)return;this.data.splice(e,1)}this.triggerEvent("dataChanged")},toggleCheckStateFrom:function(b,d,e){d||(d=this.getDataSourceByIndex(b));if(d){b=this.getNodeDataByData(d);b.checked=e;this.alterData(d[this.indexKey],e);if(b=this.getHolder(b.index))(b=b.getItemRender())&&b.setChecked(e);if(d.children&&d.children.length){var f;b=0;for(f=d.children.length;b<f;b++)this.toggleCheckStateFrom(null,d.children[b],e)}}},openNode:function(b,d){this._super(b,d);
this.determineCheckboxData();this.determineCheckboxState()},closeNode:function(b,d){this._super(b,d);this.determineCheckboxData();this.determineCheckboxState()},setData:function(b){this.data=b;this.determineCheckboxData();this.determineCheckboxState();return this},updateDisplay:function(){this._super();this.determineCheckboxData();this.determineCheckboxState()},determineCheckboxData:function(b){if(!(!this.isRendered||!this.data||!this.data.length)){if(!b)b=this.datasource;var d,e;d=0;for(e=b.length;d<
e;d++){var f=b[d],g=this.getNodeDataByData(f);if(!f.children||!f.children.length){if(this.data.indexOf(f[this.indexKey])!==-1)if(f=this.getHolder(g.index))if(f=f.getItemRender()){f.setChecked(true);g.checked=true}}else{var j;g=0;for(j=f.children.length;g<j;g++)this.determineCheckboxData([f.children[g]])}}}},determineCheckboxState:function(b){if(!(!this.isRendered||!this.data||!this.data.length)){if(!b)b=this.datasource;var d=true,e=true,f,g;f=0;for(g=b.length;f<g;f++){var j=b[f];e=d=true;if(j.children&&
j.children.length){var h,n;h=0;for(n=j.children.length;h<n;h++){var k=j.children[h],o=this.getNodeDataByData(k);this.determineCheckboxState([k]);if(o.checked)e=false;else d=false;if(o.indeterminate)e=d=false}itemNodeData=this.getNodeDataByData(j);j=this.getHolder(itemNodeData.index);h=null;if(j)h=j.getItemRender();if(d){if(h){h.setChecked(true);h.setEnabled(true)}itemNodeData.checked=true;itemNodeData.indeterminate=false}else if(e){h&&h.setChecked(false);itemNodeData.checked=false;itemNodeData.indeterminate=
false}else{if(h){h.setChecked(true);h.setEnabled(false)}itemNodeData.checked=true;itemNodeData.indeterminate=true}}}}}});Banana.Controls.DataGridFilterManager={};
namespace("Banana.Controls").DataGridFilterManager=Banana.Control.extend({init:function(){this._super();this.enableCookie=true;this.showBindedFiltersOnly=false;this.forcedInvisibleFilters=[];this.filters=[];this.filterKeys=[];this.urlPreFix=""},ignoreAutoVisible:function(){this.ignoreAutoVisible=true;return this},showBindedOnly:function(){this.showBindedFiltersOnly=true;return this},setKeepAllValueInUrl:function(b){this.keepAllValueVisible=b;return this},setUrlPreFix:function(b){this.urlPreFix=b;
return this},disableHistory:function(){this.enableCookie=false;return this},setFilters:function(b){function d(n){if(!n.data){var k;if(e&&Banana.Application.loadingWithHistory){k=Banana.Util.StateManager.getState(f+n.filterField);Banana.Util.UrlManager.registerModule(f+n.filterField);Banana.Util.UrlManager.setModule(f+n.filterField,k,true)}else k=Banana.Util.UrlManager.getModule(f+n.filterField);n.setData(k||h.getAllKey()||h.promptText)}}for(var e=this.enableCookie,f=this.urlPreFix,g=0,j=b.length;g<
j;g++){var h=b[g];d(h);h.bind("filterDataChanged",this.getProxy(this.filterDataChanged));h.bind("filterDataSourceChanged",this.getProxy(this.filterDataSourceChanged));h.bind("onSetVisible",this.getProxy(this.filterVisibilityChanged));Banana.Util.UrlManager.listenModule(f+h.filterField,this.getProxy(this.filterUrlChanged),h);this.filterKeys.push(f+h.filterField);!this.ignoreAutoVisible&&h instanceof Banana.Controls.ListControl&&this.showBindedFiltersOnly&&!h.datasource&&h.setVisible(false);this.filters.push(b[g])}Banana.Util.UrlManager.updateUrl();
return this},getFilters:function(){return this.filters},getFilterById:function(b){if(typeof b=="string")for(var d=0,e=this.filters.length;d<e;d++)if(this.filters[d].id==b)return this.filters[d];return null},filterUrlChanged:function(b,d){if(!this.ignoreUrlChanges){var e=b.data;e.setData(d);if(!this.keepAllValueVisible&&(e.getData()===null||e.getData()==undefined||e.getData()==e.allKey))this.removeFilterValues(e);this.enableCookie&&Banana.Util.StateManager.setState(this.urlPreFix+e.filterField,e.getData());
this.triggerEvent("filtersChanged",{data:this.getFilterData(b),filter:e})}},filterDataSourceChanged:function(b){this.ignoreAutoVisible||b.currentTarget.datasource&&b.currentTarget.setVisible(true)},filterDataChanged:function(b){this.clearCache();!this.keepAllValueVisible&&(b.currentTarget.getData()===null||b.currentTarget.getData()==undefined||b.currentTarget.getData()==b.currentTarget.allKey)?this.removeFilterValues(b.currentTarget):this.registerFilterValues(b.currentTarget);this.triggerEvent("filtersChanged",
{data:this.getFilterData(b),filter:b.currentTarget})},filterVisibilityChanged:function(b,d){b.currentTarget.isRendered&&!d&&this.removeFilterValues(b.currentTarget)},removeFilterValues:function(b){if(typeof b=="string")b=this.getFilterById(b);Banana.Util.UrlManager.removeModule(this.urlPreFix+b.filterField);this.enableCookie&&Banana.Util.StateManager.removeState(this.urlPreFix+b.filterField)},setFilterValue:function(b,d){if(typeof b=="string")b=this.getFilterById(b);d==b.allKey?this.removeFilterValues(b):
b.setData(d)},registerFilterValues:function(b){this.ignoreUrlChanges=true;Banana.Util.UrlManager.registerModule(this.urlPreFix+b.filterField);Banana.Util.UrlManager.setModule(this.urlPreFix+b.filterField,b.getData());this.enableCookie&&Banana.Util.StateManager.setState(this.urlPreFix+b.filterField,b.getData());this.ignoreUrlChanges=false},clearCache:function(){this.filtersData=undefined},getFilterData:function(b,d){if(!this.filters)return null;if(!b&&this.filtersData)return this.filtersData;var e=
{};b=0;for(var f=this.filters.length;b<f;b++){var g=this.filters[b];if(g.getData()&&(!g.isRendered||g.visible))e[g.name||g.filterField]={filterField:g.filterField,data:g.getData(),dataChanged:g.isChanged}}this.filtersData=e;if(d){d={};b=0;for(f=this.filters.length;b<f;b++){g=this.filters[b];if(g.getData()&&(!g.isRendered||g.visible))d[g.filterField]=g.getData()}return d}return this.filtersData}});Banana.Controls.DataGridControlPanel={};
namespace("Banana.Controls").DataGridControlPanel=Banana.Control.extend({init:function(){this._super();this.createLayout();this.buttons=[];this.topButtons=[]},updateDisplay:function(){this.top.setVisible(this.top.controls.length);this.middle.setVisible(this.middle.controls.length);this.bottom.setVisible(this.bottom.controls.length-1)},setFilters:function(b){for(var d=0,e=b.length;d<e;d++)if(b[d]instanceof Banana.Controls.DataGridPagerFilter)this.setPagerFilter(b[d]);else if(b[d]instanceof Banana.Controls.DataGridDropDownFilter)this.setDropDownFilter(b[d]);
else if(b[d]instanceof Banana.Controls.DataGridSearchFilter)this.setSearchFilter(b[d]);else if(b[d]instanceof Banana.Controls.DataGridDateFilter)this.setDateFilter(b[d]);else{this.top.addControl(b[d]);b[d].setStyle("margin-left:2px;");log.error("Filter "+b[d]+" not reconized by datagrid control panel!")}},setSearchFilter:function(b){b.addCssClass("BDataGridFilter").setStyle("margin-left:2px;");this.middle.addControl(b)},setPagerFilter:function(b){this.bottom.addControl(b)},setDateFilter:function(b){this.top.addControl(b)},
setDropDownFilter:function(b){b.setStyle("float:left;");b.addCssClass("BDataGridFilter").setStyle("margin-left:2px;");this.middle.addControl(b)},setTopButtons:function(b){this.topButtons=b;for(var d=0,e=b.length;d<e;d++){this.top.addControl(b[d]);b[d].setStyle("float:right;margin-right:2px;")}},setButtons:function(b){this.buttons=b;buttondownadded=false;for(var d=0,e=b.length;d<e;d++){buttondownadded=true;this.bottom.addControl(b[d])}buttondownadded&&this.arrow.setVisible(true)},createLayout:function(){this.top=
(new Banana.Controls.Panel).addCssClass("BDataGridControlTopPanel");this.middle=(new Banana.Controls.Panel).addCssClass("BDataGridControlMiddlePanel");this.bottom=(new Banana.Controls.Panel).addCssClass("BDataGridControlBottomPanel");this.addControl(this.top);this.addControl(this.middle);this.addControl(this.bottom);this.arrow=(new Banana.Controls.Panel).addCssClass("BDatagridRowArrowIndicator");this.arrow.setVisible(false);this.bottom.addControl(this.arrow)}});Banana.Controls.BaseDataGridFilter={};namespace("Banana.Controls").BaseDataGridFilter=Banana.Controls.Panel.extend({init:function(){this._super();this.allKey="%";this.allTitle=null},setDataSource:function(b,d){var e={};e[this.allKey]=this.allTitle||"All "+this.filterField;for(var f in b)if(typeof b[f]!="function")e[f]=b[f];this._super(e,d);return this},setData:function(b){this.data=b;return this},getData:function(){return this.data}});
Banana.Controls.BaseDataGridFilter.prototype.setAllTitle=function(b,d){this.allTitle=b;if(d)this.allKey=d;return this};Banana.Controls.BaseDataGridFilter.prototype.setFilterField=function(b){this.filterField=b;return this};Banana.Controls.BaseDataGridFilter.prototype.getFilterfield=function(){return this.filterField};Banana.Controls.BaseDataGridFilter.prototype.setName=function(b){this.name=b;return this};Banana.Controls.DataGridCheckboxFilter={};
namespace("Banana.Controls").DataGridCheckboxFilter=Banana.Controls.BaseDataGridFilter.extend({init:function(){this._super();this.checkbox=new Banana.Controls.CheckBox;this.checkbox.bind("change",this.getProxy(function(){this.triggerEvent("filterDataChanged")}));this.label=new Banana.Controls.Label},createComponents:function(){this.addControl(this.checkbox);this.addControl(this.label)},setData:function(b,d,e){this.checkbox.setData(b,d,e)},getData:function(){return this.checkbox.getData()},setTitle:function(b){this.label.setData(b);
return this},getTitle:function(){return this.label.getData()},getAllKey:function(){return null}});Banana.Controls.DataGridDropDownFilter={};
namespace("Banana.Controls").DataGridDropDownFilter=Banana.Controls.DropDown.extend({init:function(){this._super();this.allKey="%";this.allTitle=null;this.bind("dataChanged",this.getProxy(function(){this.triggerEvent("filterDataChanged")}));this.bind("dataSourceChanged",this.getProxy(function(){this.triggerEvent("filterDataSourceChanged")}))},setDataSource:function(b,d){if(b instanceof Array&&typeof b[0]=="object"){var e=this.dataValueField||"value",f={};f[this.dataKeyField||"key"]=this.allKey;f[e]=
this.allTitle||"All "+this.filterField;b.unshift(f)}else{e={};e[this.allKey]=this.allTitle||"All "+this.filterField;for(f in b)if(typeof b[f]!="function")e[f]=b[f];b=e}this._super(b,d);return this}});a=Banana.Controls.DataGridDropDownFilter.prototype;a.getAllKey=function(){return this.allKey};a.setAllTitle=function(b,d){this.allTitle=b;if(d)this.allKey=d;return this};a.setFilterField=function(b){this.filterField=b;return this};a.setName=function(b){this.name=b;return this};a.getFilterfield=function(){return this.filterField};
a.getData=function(){return this.data};Banana.Controls.DataGridSearchFilter={};
namespace("Banana.Controls").DataGridSearchFilter=Banana.Controls.TextBox.extend({init:function(){this.untouched=true;this._super();this.addCssClass("BDataGridSearch");this.promptText="Enter search term";this.allKey="%";this.bind("dataChanged",this.getProxy(this.handleChange))},getData:function(){if(this.data==this.promptText)return this.allKey;return this.data||this.allKey},handleChange:function(){if(this.getData()!=this.previousSearch){this.timer&&clearTimeout(this.timer);this.timer=setTimeout(this.getProxy(function(){if(!this.preventEvent&&
!this.untouched){this.previousSearch=this.getData();this.triggerEvent("filterDataChanged",this.getData());clearTimeout(this.timer)}this.preventEvent=false}),400)}},setFilterField:function(b){this.filterField=b;return this},getFilterField:function(){return this.filterField}});Banana.Controls.DataGridSearchFilter.prototype.getAllKey=function(){return null};
Banana.Controls.DataGridSearchFilter.prototype.createComponents=function(){this.bind("click",this.getProxy(this.searchClicked));if(!this.getData()){var b=Banana.Util.UrlManager.getModule("search");b?this.setData(b):this.setData(this.promptText)}};Banana.Controls.DataGridSearchFilter.prototype.searchClicked=function(){if(this.untouched){this.preventEvent=true;this.setData("")}this.untouched=false};Banana.Controls.DataGridPagerFilter={};
namespace("Banana.Controls").DataGridPagerFilter=Banana.Controls.ListControl.extend({init:function(){this.addCssClass("BDataGridPagerFilter");this._super();this.dropDown=(new Banana.Controls.DropDown).setVisible(false);this.pagerLinks=(new Banana.Controls.Panel).addCssClass("BDataGridPagerFilterButtonContainer");this.addControl(this.dropDown);this.addControl(this.pagerLinks);this.dropDown.bind("selectionChanged",this.getProxy(this.pagerDropDownChanged));this.bind("dataChanged",this.getProxy(function(){this.onSetData();
this.dropDown.setData(this.getData());this.createDropDownDataSource();this.datasource!=null&&this.createPageLinks();this.triggerEvent("filterDataChanged",true)}));this.bind("dataSourceChanged",this.getProxy(function(){if(this.data!=null){this.createPageLinks();this.createDropDownDataSource()}this.triggerEvent("filterDataSourceChanged")}));this.bind("indexChanged",this.getProxy(function(){this.createDropDownDataSource();this.triggerEvent("filterDataChanged")}))}});a=Banana.Controls.DataGridPagerFilter.prototype;
a.getAllKey=function(){return null};a.setFilterField=function(b){this.filterField=b;return this};a.getFilterField=function(){return this.filterField};a.nextClick=function(){if(!(this.getDataSource()<=parseInt(this.getData())+1)){this.setData(parseInt(this.getData())+1);jQuery(this).trigger("indexChanged",this.getData())}};a.previousClick=function(){if(!(this.getData()<=0)){this.setData(parseInt(this.getData())-1);jQuery(this).trigger("indexChanged",this.getData())}};
a.pagerDropDownChanged=function(){this.setData(parseInt(this.dropDown.getData()));jQuery(this).trigger("indexChanged",this.dropDown.getData());this.createPageLinks()};a.setDataGridOwner=function(b){this.datagridowner=b};a.onSetData=function(){};
a.createPageLinks=function(){this.pagerLinks.clear();if(this.datasource<=1)this.dropDown.setVisible(false);else{this.dropDown.setVisible(true);var b=parseInt(this.datasource),d=parseInt(this.data),e=1;if(d>2)e=b-d<3?b-4:d-1;if(e<1)e=1;var f=e+5;if(f>b)f=b+1;b=(new Banana.Controls.Button).addCssClass("BDataGridPagerFilterButton");b.setText("< ");this.pagerLinks.addControl(b);for(i=e;i<f;i++){if(i>this.datasource)break;e=(new Banana.Controls.Button).addCssClass("BDataGridPagerFilterButton");e.setText(i);
i-1==d&&e.addCssClass("BDataGridPagerFilterButtonSelected");this.pagerLinks.addControl(e);e.bind("click",this.getProxy(this.onPageNavigate),i)}d=(new Banana.Controls.Button).addCssClass("BDataGridPagerFilterButton");d.setText(">");d.bind("click",this.getProxy(this.nextClick));b.bind("click",this.getProxy(this.previousClick));this.pagerLinks.addControl(d);this.pagerLinks.invalidateDisplay()}};
a.onPageNavigate=function(b){this.setData(parseInt(b.data)-1);this.dropDown.setData(parseInt(b.data)-1);jQuery(this).trigger("indexChanged",this.getData())};
a.createDropDownDataSource=function(){if(this.getDataSource()){var b=parseInt(this.datasource),d=parseInt(this.data),e=b,f=Math.floor(e/20),g=d-10,j=d+10;b=[];if(e<50)for(d=1;d<=e;d++)b.push(d);else{for(d=1;d<=5;d++)b.push(d);var h;for(h=e-5;h<=e;h++)b.push(h);h=5;e=e-5;for(var n=false;h<=e;){if(h>=g&&h<=j){h++;n=true}else{h+=f;if(h>g&&!n)h=g}h>0&&h<=e&&b.push(h)}sortfunc=function(k,o){return parseInt(k,10)-parseInt(o,10)};b.sort(sortfunc)}f=[];for(d in b)if(typeof b[d]!="function"){g={};g.key=b[d]-
1;g.value=b[d];f.push(g)}this.dropDown.setDataSource(f,true)}};Banana.Controls.DataGridDateFilter={};namespace("Banana.Controls").DataGridDateFilter=Banana.Controls.DatePicker.extend({init:function(){this._super();this.bind("dataChanged",this.getProxy(this.triggerEvent("filterDataChanged")))},setTitle:function(b){this.title=b;return this},getTitle:function(){return this.title},getAllKey:function(){return null}});Banana.Controls.DataGridDateFilter.prototype.setFilterField=function(b){this.filterField=b;return this};
Banana.Controls.DataGridDateFilter.prototype.getFilterfield=function(){return this.filterField};Banana.Controls.DataGridDateFilter.prototype.setName=function(b){this.name=b;return this};Banana.Controls.DataGrid={};
namespace("Banana.Controls").DataGrid=Banana.Controls.ListControl.extend({init:function(){this._super();this.datasource=[];this.listRender=null;this.createBasicControls()},createComponents:function(){this.triggerEvent("datagridReady")},setDataSource:function(b){this.datasource=b;this.triggerEvent("onSetDataSource",b);return this},setData:function(b){this.setDataSource(b);return this},getData:function(){return this.datasource},setControlPanel:function(b){if(!(b instanceof Banana.Controls.DataGridControlPanel))return this;
this.controlPanelHolder.addControl(b);return this},setEmptyTemplate:function(b){this.emptyTemplate=b;this.clearEmptyTemplate();this.createEmptyTemplate();return this},createBasicControls:function(){this.addCssClass("BDataGrid");this.controlPanelHolder=new Banana.Control;this.listHolder=new Banana.Controls.Panel;this.infoHolder=(new Banana.Controls.Panel).addCssClass("BDataGridInfoHolder");this.loaderHolder=new Banana.Controls.Panel;this.addControl(this.loaderHolder);this.addControl(this.controlPanelHolder);
this.addControl(this.listHolder);this.addControl(this.infoHolder)},setListRender:function(b){this.clearListRender();this.listRender=b;this.listRender.datagrid=this;this.datasource&&this.datasource.length&&this.setDataSource(this.datasource);return this},getListRender:function(){if(!this.listRender)this.listRender=new Banana.Controls.DataGridTableListRender;return this.listRender},clearListRender:function(){this.listHolder.clear();return this},createListRender:function(){if(!this.listRender||!this.listRender.id)this.listRender=
this.getListRender();if(this.listHolder.controls.indexOf(this.listRender)===-1){this.listHolder.setId("listHolder");this.listHolder.addControl(this.listRender);this.listRender.datagrid=this;this.listRender.bind("dataSourceChanged",this.getProxy(function(){this.datasource=this.listRender.datasource;if(!(this.emptyTemplateCleared&&this.datasource.length)){this.emptyTemplateCleared=false;if(this.datasource.length){this.clearEmptyTemplate();this.emptyTemplateCleared=true}else this.createEmptyTemplate()}}))}},
onSetDataSource:function(){if(!this.datasource)this.datasource=[];this.datasource.length?this.infoHolder.setVisible(false):this.createEmptyTemplate();this.listRender&&this.listRender.clear();this.createListRender();this.listRender.setDataSource(this.datasource);this.isRendered&&this.listHolder.invalidateDisplay()},showInitLoader:function(){},renderList:function(){},showLoader:function(){},createEmptyTemplate:function(){this.infoHolder.clear();this.emptyTemplate?this.infoHolder.addControl(this.emptyTemplate(),
true).setVisible(true):this.infoHolder.addControl("No data found",true).setVisible(true)},clearEmptyTemplate:function(){this.infoHolder.clear();return this}});var thirdparty={};thirdparty.jquerymaskedinput122={};
(function(b){var d=(b.browser.msie?"paste":"input")+".mask",e=window.orientation!=undefined;b.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};b.fn.extend({caret:function(f,g){if(this.length!=0)if(typeof f=="number"){g=typeof g=="number"?g:f;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,g)}else if(this.createTextRange){var h=this.createTextRange();h.collapse(true);h.moveEnd("character",g);h.moveStart("character",f);h.select()}})}else{if(this[0].setSelectionRange){f=
this[0].selectionStart;g=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){var j=document.selection.createRange();f=0-j.duplicate().moveStart("character",-100000);g=f+j.text.length}return{begin:f,end:g}}},unmask:function(){return this.trigger("unmask")},mask:function(f,g){if(!f&&this.length>0){var j=b(this[0]),h=j.data("tests");return b.map(j.data("buffer"),function(r,t){return h[t]?r:null}).join("")}g=b.extend({placeholder:"_",completed:null},g);var n=b.mask.definitions;
h=[];var k=f.length,o=null,p=f.length;b.each(f.split(""),function(r,t){if(t=="?"){p--;k=r}else if(n[t]){h.push(new RegExp(n[t]));if(o==null)o=h.length-1}else h.push(null)});return this.each(function(){function r(m){for(;++m<=p&&!h[m];);return m}function t(m){for(;!h[m]&&--m>=0;);for(var q=m;q<p;q++)if(h[q]){w[q]=g.placeholder;var u=r(q);if(u<p&&h[q].test(w[u]))w[q]=w[u];else break}z();s.caret(Math.max(o,m))}function E(m){m=m;for(var q=g.placeholder;m<p;m++)if(h[m]){var u=r(m),v=w[m];w[m]=q;if(u<p&&
h[u].test(v))q=v;else break}}function F(m){var q=b(this).caret();m=m.keyCode;A=m<16||m>16&&m<32||m>32&&m<41;if(q.begin-q.end!=0&&(!A||m==8||m==46))C(q.begin,q.end);if(m==8||m==46||e&&m==127){t(q.begin+(m==46?0:-1));return false}else if(m==27){s.val(B);s.caret(0,x());return false}}function G(m){if(A){A=false;return m.keyCode==8?false:null}m=m||window.event;var q=m.charCode||m.keyCode||m.which,u=b(this).caret();if(m.ctrlKey||m.altKey||m.metaKey)return true;else if(q>=32&&q<=125||q>186){m=r(u.begin-
1);if(m<p){q=String.fromCharCode(q);if(h[m].test(q)){E(m);w[m]=q;z();q=r(m);b(this).caret(q);g.completed&&q==p&&g.completed.call(s)}}}return false}function C(m,q){for(m=m;m<q&&m<p;m++)if(h[m])w[m]=g.placeholder}function z(){return s.val(w.join("")).val()}function x(m){for(var q=s.val(),u=-1,v=0,y=0;v<p;v++)if(h[v]){for(w[v]=g.placeholder;y++<q.length;){var D=q.charAt(y-1);if(h[v].test(D)){w[v]=D;u=v;break}}if(y>q.length)break}else if(w[v]==q[y]&&v!=k){y++;u=v}if(!m&&u+1<k){s.val("");C(0,p)}else if(m||
u+1>=k){z();m||s.val(s.val().substring(0,u+1))}return k?v:o}var s=b(this),w=b.map(f.split(""),function(m){if(m!="?")return n[m]?g.placeholder:m}),A=false,B=s.val();s.data("buffer",w).data("tests",h);s.attr("readonly")||s.one("unmask",function(){s.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){B=s.val();var m=x();z();setTimeout(function(){m==f.length?s.caret(0,m):s.caret(m)},0)}).bind("blur.mask",function(){x();s.val()!=B&&s.change()}).bind("keydown.mask",F).bind("keypress.mask",
G).bind(d,function(){setTimeout(function(){s.caret(x(true))},0)});x()})}})})(jQuery);Banana.Controls.SwitchButton={};
namespace("Banana.Controls").SwitchButton=Banana.Controls.Panel.extend({init:function(){this._super();this.status=false},createComponents:function(){this.image=new Banana.Controls.Image;this.addControl(this.image);this.bind("click",this.getProxy(function(){this.status=this.status?false:true;this.triggerEvent("switched",this.status);this.bindImage();this.image.invalidateDisplay()}));this.bindImage()},bindImage:function(){this.status?this.image.setImage(this.onImage):this.image.setImage(this.offImage)},
setOnImage:function(b){this.onImage=b;this.isRendered&&this.bindImage();return this},setOffImage:function(b){this.offImage=b;this.isRendered&&this.bindImage();return this},on:function(){this.status=true;this.isRendered&&this.bindImage();return this},off:function(){this.status=false;this.isRendered&&this.bindImage();return this}});Banana.Controls.Window={};
namespace("Banana.Controls").Window=Banana.Controls.Panel.extend({init:function(){this._super();this.collapsed=false;var b=new Banana.Controls.Panel;b.addCssClass("BWindowHeader");this.addControl(b,true);this.switchButton=new Banana.Controls.SwitchButton;this.switchButton.addCssClass("BWindowSwitch");this.switchButton.on();this.switchButton.bind("switched",this.getProxy(this.switchCollapseState));b.addControl(this.switchButton);this.headerTitle=new Banana.Controls.Label;this.headerTitle.addCssClass("BWindowTitle");
b.addControl(this.headerTitle);this.content=new Banana.Controls.Panel;this.content.addCssClass("BWindowContent");this.addControl(this.content,true);this.addControl('<div style="height:4px;clear:both;font-size:1px;">&nbsp;</div>',true)},clear:function(){this.content.clear();return this},switchCollapseState:function(b,d){this.setState("collapsed",d);if(d){this.setState("collapsed",true);this.close()}else{this.setState("collapsed",false);this.open()}},addControl:function(b,d){d?this._super(b):this.content.addControl(b);
return this},setTitle:function(b){this.title=b;return this},getTitle:function(){return this.title},createComponents:function(){this.headerTitle.setData(this.getTitle());this.switchButton.setOnImage(Banana.Application.getSettings().imagedir+"/arrowclose.png");this.switchButton.setOffImage(Banana.Application.getSettings().imagedir+"/arrowopen.png");var b=false;b=this.getState("collapsed");if(b=b===null?this.collapsed?false:true:b?false:true){this.collapsed=true;this.switchButton.off()}else{this.content.setCss({display:"none"});
this.collapsed=false;this.switchButton.on()}this.addCssClass("BWindow")},open:function(){this.collapsed=false;jQuery("#"+this.content.getClientId()).show();return this},close:function(){this.collapsed=true;jQuery("#"+this.content.getClientId()).hide();return this}});Banana.Controls.Button={};
namespace("Banana.Controls").Button=Banana.Controls.Panel.extend({init:function(){this._super();this.addCssClass("BButton");this.addCssClass("BButtonHover");this.bind("click",this.getProxy(function(b){if(this.enabled!==undefined&&this.enabled===false){b.stopImmediatePropagation();b.stopPropagation()}}))},getTagName:function(){return"button"},createComponents:function(){if(this.imageUrl){this.image=new Banana.Controls.Image;this.image.setImage(this.imageUrl);this.addControl(this.image)}else{this.label=(new Banana.Controls.Label).addCssClass("BButtonLabel");
this.labelStyle&&this.label.setStyle(this.labelStyle);this.labelClass&&this.label.addCssClass(this.labelClass);this.label.setData(this.text);this.addControl(this.label)}},setEnabled:function(b){if(b){this.removeCssClass("BButtonDisabled");this.addCssClass("BButtonHover")}else{this.addCssClass("BButtonDisabled");this.removeCssClass("BButtonHover")}this.enabled=b;return this},setLabelStyle:function(b){this.labelStyle=b;return this},setLabelCssClass:function(b){this.labelClass=b;return this},setText:function(b){this.text=
b;return this},setImage:function(b){this.imageUrl=b;this.isRendered&&this.image.setImage(this.imageUrl);return this}});Banana.Controls.Link={};namespace("Banana.Controls").Link=Banana.Controls.DataControl.extend({init:function(){this._super();this.addCssClass("BLink")},updateDisplay:function(){this.text&&Banana.Util.DomHelper.renderHtml(this.text,this)},setTarget:function(b){this.setAttribute("target",b)},setHref:function(b){this.setAttribute("href",b);return this},setText:function(b){this.text=b;this.isRendered&&Banana.Util.DomHelper.renderHtml(this.text,this,true);return this},getTagName:function(){return"a"}});Banana.Controls.LinkButton={};namespace("Banana.Controls").LinkButton=Banana.Controls.Button.extend({init:function(){this._super();this.addCssClass("BLinkButton")}});Banana.Controls.Canvas={};namespace("Banana.Controls").Canvas=Banana.UiControl.extend({init:function(b){this._super();this.type=b}});Banana.Controls.Canvas.prototype.getContext=function(){if(!this.context){console.log(this.type);this.context=document.getElementById(this.getClientId()).getContext(this.type||"2d")}return this.context};Banana.Controls.Canvas.prototype.clear=function(){var b=this.getParent().getDemensions(),d=this.getContext();d.clearRect(0,0,b.width,b.height);d.beginPath()};
Banana.Controls.Canvas.prototype.getTagName=function(){return"canvas"};Banana.Controls.Modal={};
namespace("Banana.Controls").Modal=Banana.Controls.Panel.extend({init:function(){this.keepFixed=true;this._super();this.antiPaddingBug=new Banana.Controls.Panel;this.antiPaddingBug.addCssClass("BModalAntiPadding");this.contentContainer=(new Banana.Controls.Panel).setStyle("float:left;width:100%;");this.contentContainer.addCssClass("BModalContentContainer");this.contentContainer.setId("content");this.titleLabel=(new Banana.Controls.Label).setStyle("float:left;padding-left:5px;");this.buttonContainer=
(new Banana.Controls.Panel).addCssClass("BModalButtonContainer")},setKeepFixed:function(b){this.keepFixed=b;return this},updateDisplay:function(){this.center();this.keepFixed&&this.container.setCss({position:"fixed",top:this.getPage().getDemensions().offset.top+20})},setButtonsEnabled:function(b){for(var d=this.buttonContainer.getControls(),e=0;e<d.length;e++)d[e].setEnabled(b);return this},setButtons:function(b){this.isRendered&&this.buttonContainer.clear();if(b.length){i=0;for(len=b.length;i<len;i++)if(b[i]instanceof
Banana.Controls.Button)this.buttonContainer.addControl(b[i]);else{var d=new Banana.Controls.Button;d.addCssClass("BButtonGray");d.setStyle("margin-left:5px;float:left;");d.bind("click",b[i][1]);d.setText(b[i][0]);this.buttonContainer.addControl(d)}}else for(var e in b)if(b[i]instanceof Banana.Controls.Button)this.buttonContainer.addControl(b[e]);else{d=new Banana.Controls.Button;d.addCssClass("BButtonGray");d.setStyle("margin-left:5px;float:left;");d.bind("click",b[e]);d.setText(e);this.buttonContainer.addControl(d)}this.isRendered&&
this.buttonContainer.invalidateDisplay();return this},createComponents:function(){this.cover=new Banana.Controls.Panel;this.cover.addCssClass("BModalCover");this.container=new Banana.Controls.Panel;this.container.addCssClass("BModal");this.container.setStyle(this.style);var b=(new Banana.Controls.Panel).setStyle("font-weight:bold; height:20px; width:100%;"),d=(new Banana.Controls.Panel).addCssClass("BModalCloseButton");b.addControl(this.titleLabel);this.antiPaddingBug.addControl(this.contentContainer);
this.antiPaddingBug.addControl(this.buttonContainer);this.container.addControl(b).addControl(this.antiPaddingBug);this.addControl(this.cover,true);this.addControl(this.container,true);this.bind("renderComplete",this.getProxy(this.center));d.bind("click",this.getProxy(function(){this.hide()}))},center:function(){this.isRendered&&this.container.setCss({"margin-left":this.getPage().getDemensions().width/2-this.container.getDemensions().width/2+"px","margin-top":"40px"});return this},hide:function(){this.setVisible(false);
this.triggerEvent("close");return this},show:function(){this.titleLabel.setVisible(this.titleLabel.getData());this.setVisible(true,50,"fadeIn");this.center();this.triggerEvent("onShow");return this},setTitle:function(b){this.titleLabel.setData(b);return this},addControl:function(b,d){d?this._super(b):this.contentContainer.addControl(b);return this}});Banana.Controls.ConfirmModal={};
namespace("Banana.Controls").ConfirmModal=Banana.Controls.Modal.extend({init:function(){this._super();this.text=new Banana.Controls.Label;this.text.addCssClass("BConfirmModalText");this.textTitle=new Banana.Controls.Label;this.textTitle.addCssClass("BConfirmModalTitle")},createComponents:function(){this._super();this.container.addCssClass("BConfirmModal");var b=new Banana.Controls.Panel;b.addCssClass("BConfirmModalImage");var d=new Banana.Controls.Panel;d.addCssClass("BConfirmModalContainer");d.addControl(this.textTitle);
d.addControl(this.text);this.addControl(b);this.addControl(d);this.setButtons({Ok:this.getProxy(function(){this.triggerEvent("onOk");this.hide()}),Cancel:this.getProxy(function(){this.hide()})})},setTextTitle:function(b){this.textTitle.setData(b);return this},setText:function(b){this.text.setData(b);return this},show:function(){this.textTitle.setVisible(this.textTitle.getData());this.text.setVisible(this.text.getData());this._super()}});Banana.Controls.Fieldset={};namespace("Banana.Controls").Fieldset=Banana.UiControl.extend({init:function(){this._super();this.addCssClass("BFieldset")},getTagName:function(){return"fieldset"}});Banana.Controls.Legend={};namespace("Banana.Controls").Legend=Banana.UiControl.extend({init:function(){this._super();this.addCssClass("BLegend")},getTagName:function(){return"legend"}});Banana.Controls.Title={};namespace("Banana.Controls").Title=Banana.UiControl.extend({init:function(b){this._super();this.addCssClass("BTitle");this.tag="h2";if(b)this.tag=b},setTagName:function(b){this.tag=b;return this},getTagName:function(){return this.tag}});Banana.Controls.Decorators={};Banana.Controls.Decorators.Decorator={};namespace("Banana.Controls.Decorators").Decorator=Banana.Controls.Panel.extend({init:function(b){this._super();this.decoratedControl=b},getDecoratedControl:function(){if(this.decoratedControl instanceof Banana.Controls.Decorators.Decorator)return this.decoratedControl.getDecoratedControl();return this.decoratedControl}});Banana.Controls.Decorators.Validator={};
namespace("Banana.Controls.Decorators").Validator=Banana.Controls.Decorators.Decorator.extend({init:function(b){this._super(b);this.showIndicator=true;this.validationGroup="default";var d=(new Banana.Controls.Panel).addCssClass("BValidatorIconPlaceHolder").setId("validator icon placeholder");this.addControl(d);b.addCssClass("BValidatorDecorated");this.controlToValidate=b;this.addControl(b);this.infoPlaceHolder=(new Banana.Controls.Panel).addCssClass("BValidatorInfoPlaceHolder");this.addControl(this.infoPlaceHolder);
this.star=(new Banana.Controls.Panel).setId("validator star");this.star.addCssClass("BValidatorStar");this.getInfoText()&&this.star.setAttribute("title",this.getInfoText());d.addControl(this.star);this.arrow=(new Banana.Controls.Panel).setId("validator arrow");this.arrow.addCssClass("BValidatorArrow");this.infoPlaceHolder.addControl(this.arrow);this.info=(new Banana.Controls.Panel).addCssClass("BValidatorInfo").setId("validator info placeholder");this.infoPlaceHolder.addControl(this.info);Banana.Util.ValidationManager.addValidator(this);
return this},createComponents:function(){this.info.setVisible(false);this.arrow.setVisible(false);this.createLabelText();this.star.setVisible(this.showIndicator);if(this.validateOnEventType)this.controls[1].bind(this.validateOnEventType,this.getProxy(this.isValid));else{this.controls[1].bind("dataChanged",this.getProxy(this.isValid));this.controls[1].bind("focusout",this.getProxy(function(){}))}},unload:function(){this._super();Banana.Util.ValidationManager.removeValidator(this)},createLabelText:function(){if(!this.labelText){this.labelText=
new Banana.Controls.Label;this.labelText.addCssClass("BValidatorLabel");this.info.addControl(this.labelText)}this.labelText.setData(this.getInfoText())},showIndicators:function(){this.info.setVisible(true);this.arrow.setVisible(true)},hideIndicators:function(){this.info.setVisible(false);this.arrow.setVisible(false)},setShowIndicator:function(b){this.showIndicator=b;return this},setValidateOnEventType:function(b){this.validateOnEventType=b;return this},getValidatedControl:function(){return this.controlToValidate},
updateDisplay:function(){this.orgBorder=this.controls[1].getStyleProperty("border")},markInvalid:function(b){this.markedInvalid=true;if(b){this.oldInfoText=this.infoText;this.infoText=b}this.isValid();return this},removeMarkInvalid:function(){this.markedInvalid=undefined;if(this.oldInfoText)this.infoText=this.oldInfoText;this.isValid()},isValid:function(){if(!this.controls)return false;var b=this.controls[1];if(!b.enabled)return true;var d;d=this.markedInvalid?false:this.validateData(b.getData(true));
if(d==false){this.createLabelText();b.addCssClass("BValidatorControlInvalidated");this.showIndicators();return false}else if(d==true){b.removeCssClass("BValidatorControlInvalidated");this.hideIndicators();return true}},validateData:function(){return true},getInfoText:function(){return this.infoText||""},setInfoText:function(b){this.infoText=b;return this},setValidationGroup:function(b){this.validationGroup=b;return this},getValidationGroup:function(){return this.validationGroup},getData:function(){return this.controls[1].getData()},
setData:function(b,d,e){this.controls[1].setData(b,d,e);return this},getHtml:function(){for(var b=[],d=this.getControls(),e=0,f=d.length;e<f;e++)if(d[e]instanceof Banana.Control)b.push(d[e].getHtml());else typeof d[e]=="string"&&b.push(d[e]);return b.join("")}});Banana.Controls.Decorators.TimecodeFieldValidator={};
namespace("Banana.Controls.Decorators").TimecodeFieldValidator=Banana.Controls.Decorators.Validator.extend({init:function(b){this._super(b);this.showIndicator=false},setRequired:function(b){this.showIndicator=this.required=b;return this},validateData:function(b){if(!b&&!this.required)return true;else if(!b)return false;if(b.match(/^((0?[1-9]|[12][0-9]|3[01])[\- \/.](0?[1-9]|1[012])[\- \/.](19|20)?[0-9]{2})? ?((2[0-3]|[0-1][0-9]):(5[0-9]|[0-4][0-9]):(5[0-9]|[0-4][0-9])(:(2[0-4]|[0-1][0-9]))?)?$/))return true;return false},
getInfoText:function(){return"Valid timecode required"}});Banana.Controls.Decorators.RequiredFieldValidator={};namespace("Banana.Controls.Decorators").RequiredFieldValidator=Banana.Controls.Decorators.Validator.extend({init:function(b){this._super(b);this.setInfoText("Field required")},validateData:function(b){if(b instanceof Array){if(b.length>0)return true;return false}if(b==null||b==undefined)return false;b=b.toString();if(/^\s*$/.test(b))return false;return true}});Banana.Controls.Decorators.RegExValidator={};namespace("Banana.Controls.Decorators").RegExValidator=Banana.Controls.Decorators.Validator.extend({init:function(b){this._super(b)},validateData:function(b){var d=new RegExp(this.regExString);if(b&&b.match(d))return true},setRegExString:function(b){this.regExString=b;return this}});Banana.Controls.Decorators.CharLimitFieldValidator={};namespace("Banana.Controls.Decorators").CharLimitFieldValidator=Banana.Controls.Decorators.Validator.extend({init:function(b){this._super(b);this.showIndicator=false},validateData:function(b){if(!b)return true;return b.length<=this.maxChars},setMaxChars:function(b){this.maxChars=b;return this},getInfoText:function(){return this.infoText||"Max "+this.maxChars+" chars"}});Banana.Controls.Decorators.LabelDecorator={};
namespace("Banana.Controls.Decorators").LabelDecorator=Banana.Controls.Decorators.Decorator.extend({init:function(b){this._super(b);this.customControl=b;this.customControl.addCssClass("BLabelDecoratedControl");this.addCssClass("BLabelDecorator");this.label=(new Banana.Controls.Label).addCssClass("BLabelDecoratorLabel");this.position="left";this.addControl(this.label);this.addControl(b);b.bind("onSetVisible",this.getProxy(this.onSetVisible))},onSetVisible:function(b,d){this.setVisible(d)},updateDisplay:function(){this._super();
this.label.setForControl(this.customControl)},setLabelCss:function(b){this.label.setCss(b);return this},setData:function(b){this.label.setData(b);return this},getData:function(){return this.label.getData()}});Banana.Controls.Decorators.LabelDecoratorRight={};
namespace("Banana.Controls.Decorators").LabelDecoratorRight=Banana.Controls.Decorators.Decorator.extend({init:function(b){this._super(b);this.addCssClass("BLabelDecoratorRight");this.customControl=b;this.label=new Banana.Controls.Label;this.position="left";this.label.addCssClass("BLabelDecoratorRightLabel");this.addControl(b);this.addControl(this.label);b.bind("onSetVisible",this.getProxy(this.onSetVisible))},onSetVisible:function(b,d){this.setVisible(d)},updateDisplay:function(){this._super();this.label.setForControl(this.customControl)},
setLabelCss:function(b){this.label.setCss(b);return this},setData:function(b){this.label.setData(b);return this},getData:function(){return this.label.getData()}});Banana.Controls.Decorators.InfoDecorator={};
namespace("Banana.Controls.Decorators").InfoDecorator=Banana.Controls.Decorators.Decorator.extend({init:function(b){this._super(b);this.addCssClass("BInfoDecorator");this.infoImage=(new Banana.Controls.Image).addCssClass("BInfoDecoratorInfoImage");this.infoImage.setImage("banana/images/infodot.png");this.addControl(this.infoImage);this.addControl(b);b.bind("onSetVisible",this.getProxy(this.onSetVisible))},onSetVisible:function(b,d){this.setVisible(d)},setText:function(b){this.infoImage.setAttribute("title",b);
return this}});Banana.Controls.Decorators.EqualValidator={};namespace("Banana.Controls.Decorators").EqualValidator=Banana.Controls.Decorators.Validator.extend({init:function(b){this._super(b)},setControlIdToMatch:function(b){this.controlIdToMatch=b;return this},setControlIdMatch:function(b){this.controlIdToMatch=b.id},validateData:function(b){control=this.getPage().findControl(this.controlIdToMatch);if(b===control.getData())return true;return false}});Banana.Controls.HBox={};
namespace("Banana.Control").HBox=Banana.Controls.Panel.extend({init:function(){this._super();this.setStyle("width:100%;position:relative;")},setSpacing:function(b){this.spacing=b;return this},updateDisplay:function(){this._super();for(var b=this.controls.length,d=this.getDemensions().width/b,e=0,f=b;e<f;e++){var g=this.controls[e];g.getDemensions();this.getDemensions()}d-=12;e=0;for(f=b;e<f;e++){g=this.controls[e];e!=0?g.setCss({width:d+"px","float":"left","margin-left":this.spacing+"px"}):g.setCss({width:d+
"px","float":"left"})}}});Banana.Controls.VBox={};
namespace("Banana.Controls").VBox=Banana.Controls.Panel.extend({init:function(){this._super();this.spacing=0},setSpacing:function(b){this.spacing=b;return this},updateDisplay:function(){this._super();for(var b=0,d=this.controls.length;b<d;b++){var e=this.controls[b];if(e instanceof Banana.Control){e.getStyleProperty("float")=="none"?e.setCss({clear:"both","float":"",width:"100%"}):e.setCss({clear:"both","float":""});b<this.controls.length&&e.setCss({"margin-bottom":this.spacing+"px"})}}}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(b,d){var e;d=d||0;for(e=this.length;d<e;d++)if(this[d]===b)return d;return-1};namespace("Banana.Controls").EventTypes={DOM_EVENT:1,CUSTOM_EVENT:2};
namespace("Banana").Application=Banana.Control.extend({init:function(b){this.settings=b;this.sectionVerticalScrollPosition={};this.id=0;if(b.applicationName)namespace("Banana")[b.applicationName]=this;else namespace("Banana").Application=this;if(!b.paths)b.paths={};if(!b.paths.pages)b.paths.pages="Application.Pages";log=new Banana.Util.LogManager;log.addLogger(new Banana.Util.Logger.Console);log.setLevel("error",true);this.prepareUnload()},prepareUnload:function(){jQuery(window).unload(this.getProxy(function(){jQuery("*").unbind();
this.activePage&&this.activePage.remove();this.pageTemplate&&this.pageTemplate.remove();Banana=null}))},loadPageTemplate:function(){if(this.settings.paths.pageTemplates)var b=this.settings.paths.pageTemplates+"."+this.settings.pageTemplate,d=Banana.Util.NamespaceToFunction(b);else{log.error("Warning: Path to page template "+this.settings.pageTemplate+" not specified. Check application settings.");d=Banana.PageTemplate}if(d)try{this.pageTemplate=new d}catch(e){log.error("Error: could not instantiate template: "+
b)}else log.error("Error: could not find Template: "+b)},getSettings:function(){return this.settings},setSectionVerticalScrollPosition:function(b){this.sectionVerticalScrollPosition[b]=window.scrollY},getSectionVerticalScrollPosition:function(b){return this.sectionVerticalScrollPosition[b]},loadPage:function(b,d,e){Banana.Util.UrlManager.saveModuleHistory("section");this.setSectionVerticalScrollPosition(this.section);Banana.Util.UrlManager.clearUrl();if(this.loadingWithHistory=!e){var f=Banana.Util.UrlManager.getModuleHistory(b),
g;for(g in f)if(f.hasOwnProperty(g)){Banana.Util.UrlManager.registerModule(g);Banana.Util.UrlManager.setModule(g,f[g],true)}}if(d){var j;for(j in d)if(d.hasOwnProperty(j)){Banana.Util.UrlManager.registerModule(j);Banana.Util.UrlManager.setModule(j,d[j],true)}}this.run(b);e||window.scrollTo(0,this.getSectionVerticalScrollPosition(b)||0)},instantiateSinglePage:function(){this.pageTemplate||this.loadPageTemplate();this.page.bind("renderComplete",this.getProxy(function(){if(this.activePage){this.activePage.removeDom();
this.activePage.clearProps();this.activePage=undefined}this.activePage=this.page;this.activePage.setVisible(true)}));this.page.setVisible(false);this.pageTemplate.addPageControl(this.page);this.pageTemplate.setApplication(this);this.pageTemplate.run(this)},run:function(b){if(b)this.page=b;if(b instanceof Banana.Page)return this.instantiateSinglePage();this.triggerEvent("onPreLoadPage");this.activePage||Banana.Util.UrlManager.autoRegisterModules();this.pageTemplate||this.loadPageTemplate();var d=this.page||
Banana.Util.UrlManager.getModule("section")||this.settings.defaultSection;this.section=d;this.page=undefined;this.registerUrlSection(d);this.loadingWithHistory||Banana.Util.UrlManager.updateUrl();var e=this.getProxy(function(){var f=Banana.Util.NamespaceToFunction(this.settings.paths.pages+"."+d);if(!f){if(this.settings.defaultSection===d){log.error("Error default page cannot be loaded!");return}else log.error("Page not found");return this.loadPage(this.settings.defaultSection)}this.id++;var g=new f;
g.bind("renderComplete",this.getProxy(function(){if(this.activePage){this.activePage.removeDom();this.activePage.clearProps();this.activePage=undefined}this.activePage=g;this.activePage.setVisible(true)}));g.setVisible(false);this.pageTemplate.addPageControl(g);this.pageTemplate.setApplication(this);this.pageTemplate.run();Banana.Util.UrlManager.updateUrl()});if(this.activePage){Banana.Util.UrlManager.stopChecking();this.activePage.remove(true,this.getProxy(function(){Banana.Util.UrlManager.startChecking();
e();Banana.Util.UrlManager.listenModule("section",this.getProxy(function(){this.loadPage(Banana.Util.UrlManager.getModule("section"))}))}))}else{e();Banana.Util.UrlManager.listenModule("section",this.getProxy(function(){this.loadPage(Banana.Util.UrlManager.getModule("section"))}))}},registerUrlSection:function(b){Banana.Util.UrlManager.registerModule("section",b);Banana.Util.UrlManager.setModule("section",b,true)}});var Application={};Application.Pages={};Application.Pages.PageTemplates={};Application.Pages.PageTemplates.PageTemplate={};
namespace("Application.Pages.PageTemplates").PageTemplate=Banana.PageTemplate.extend({createComponents:function(){var b=(new Banana.Controls.Panel).addCssClass("MainContainer");this.addControl(b);var d=(new Banana.Controls.Panel).addCssClass("Header");d.addControl("");b.addControl(d);b.addControl(this.content);d=(new Banana.Controls.Panel).addCssClass("footer");d.addControl("Banana Framework 2011");b.addControl(d);b.addControl('<div style="clear:both;"></div>')},getMessageBar:function(){return this.messagebar}});Application.Pages.Home={};
namespace("Application.Pages").Home=Banana.Page.extend({init:function(){this._super()},createComponents:function(){this.top=new Banana.Controls.Panel;this.left=new Banana.Controls.Panel;this.right=new Banana.Controls.Panel;this.top.addCssClass("toppanel");this.left.addCssClass("leftpanel");this.right.addCssClass("rightpanel");this.addControl(this.top);this.addControl(this.left);this.addControl(this.right);this.createTitle();this.createSubs();this.createRands()},createTitle:function(){var b=new Banana.Controls.Label;
b.setData("Banana Javascript Framework");b.addCssClass("frameworktitle");this.top.addControl(b);b=new Banana.Controls.Panel;b.addCssClass("frameworkexpl");this.left.addControl(b);var d=new Banana.Controls.UnorderedList,e=new Banana.Controls.ListItem;e.addControl("100% Javascript");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Component driven");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Efficient fast render");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Super dynamic");
d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Databinding ");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Validation");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Large control collection");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Custom control support");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("JQuery powered");d.addControl(e);e=new Banana.Controls.ListItem;e.addControl("Google closure build integration");d.addControl(e);
e=new Banana.Controls.ListItem;e.addControl("GPL license");d.addControl(e);b.addControl(d)},createSubs:function(){var b=new Banana.Controls.Panel;b.addCssClass("buttonPanel");var d=(new Banana.Controls.Panel).addCssClass("menusub");b.addControl(d);var e=new Banana.Controls.Link;e.addCssClass("menusublink");e.addControl("Examples");d.addControl(e);d=(new Banana.Controls.Panel).addCssClass("menusub").addCssClass("menusub2");b.addControl(d);e=new Banana.Controls.Link;e.addCssClass("menusublink");e.addControl("Download");
d.addControl(e);d=(new Banana.Controls.Panel).addCssClass("menusub").addCssClass("menusub3");b.addControl(d);e=new Banana.Controls.Link;e.addCssClass("menusublink");e.addControl("Documentation");d.addControl(e);this.right.addControl(b)},createRands:function(){var b=new Banana.Controls.Panel;b.addCssClass("bottom");this.addControl(b);var d=new Banana.Controls.Panel;d.addCssClass("summaryText");d.addControl("Banana is an opensource javascript application framework designed to create pure javascript webpages. Banana is designed with the single goal to help developers write fast and efficient websites.Compatible with all major browsers, Banana gives developers a component driven platform to develop applications just in the same way regular interface toolkits provides.");
b.addControl(d);b=new Banana.Controls.Panel;b.addControl(".");b.addCssClass("cube");b=new Banana.Controls.Panel;b.addControl(".");b.addCssClass("cube");b=new Banana.Controls.Panel;b.addControl(".");b.addCssClass("cube")},updateDisplay:function(){}});
